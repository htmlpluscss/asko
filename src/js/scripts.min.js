// AnimateScroll.min.js
// Sunmock Yang Nov. 2015
function animateScroll(t,n,i,e,a,r){e=e?e:0;var o=document.documentElement,s=o.clientHeight,u="scrollMaxY"in window?window.scrollMaxY:o.scrollHeight-s,c=window.pageYOffset,l=c,h=isNaN(t)?t.getBoundingClientRect():0;"center"===a?(l+=isNaN(t)?h.top+h.height/2:t,l-=s/2,l-=e):"bottom"===a?(l+=h.bottom||t,l-=s,l+=e):(l+=h.top||t,l-=e),l=Math.max(Math.min(u,l),0);var d=l-c,f={targetY:l,deltaY:d,duration:n?n:0,easing:i in animateScroll.Easing?animateScroll.Easing[i]:animateScroll.Easing.linear,onFinish:r,startTime:Date.now(),lastY:c,step:animateScroll.step};window.requestAnimationFrame(f.step.bind(f))}animateScroll.Easing={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return.5>t?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return.5>t?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return.5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t}},animateScroll.step=function(){if(this.lastY!==window.pageYOffset&&this.onFinish)return void this.onFinish();var t=Math.min((Date.now()-this.startTime)/this.duration,1),n=this.targetY-(1-this.easing(t))*this.deltaY;window.scrollTo(window.scrollX,n),1!==t?(this.lastY=window.pageYOffset,window.requestAnimationFrame(this.step.bind(this))):this.onFinish&&this.onFinish()};


(function(window,document){'use strict';if('IntersectionObserver'in window&&'IntersectionObserverEntry'in window&&'intersectionRatio'in window.IntersectionObserverEntry.prototype){if(!('isIntersecting'in window.IntersectionObserverEntry.prototype)){Object.defineProperty(window.IntersectionObserverEntry.prototype,'isIntersecting',{get:function(){return this.intersectionRatio>0;}});}
return;}
var registry=[];function IntersectionObserverEntry(entry){this.time=entry.time;this.target=entry.target;this.rootBounds=entry.rootBounds;this.boundingClientRect=entry.boundingClientRect;this.intersectionRect=entry.intersectionRect||getEmptyRect();this.isIntersecting=!!entry.intersectionRect;var targetRect=this.boundingClientRect;var targetArea=targetRect.width*targetRect.height;var intersectionRect=this.intersectionRect;var intersectionArea=intersectionRect.width*intersectionRect.height;if(targetArea){this.intersectionRatio=Number((intersectionArea/targetArea).toFixed(4));}else{this.intersectionRatio=this.isIntersecting?1:0;}}
function IntersectionObserver(callback,opt_options){var options=opt_options||{};if(typeof callback!='function'){throw new Error('callback must be a function');}
if(options.root&&options.root.nodeType!=1){throw new Error('root must be an Element');}
this._checkForIntersections=throttle(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT);this._callback=callback;this._observationTargets=[];this._queuedEntries=[];this._rootMarginValues=this._parseRootMargin(options.rootMargin);this.thresholds=this._initThresholds(options.threshold);this.root=options.root||null;this.rootMargin=this._rootMarginValues.map(function(margin){return margin.value+margin.unit;}).join(' ');}
IntersectionObserver.prototype.THROTTLE_TIMEOUT=100;IntersectionObserver.prototype.POLL_INTERVAL=null;IntersectionObserver.prototype.USE_MUTATION_OBSERVER=true;IntersectionObserver.prototype.observe=function(target){var isTargetAlreadyObserved=this._observationTargets.some(function(item){return item.element==target;});if(isTargetAlreadyObserved){return;}
if(!(target&&target.nodeType==1)){throw new Error('target must be an Element');}
this._registerInstance();this._observationTargets.push({element:target,entry:null});this._monitorIntersections();this._checkForIntersections();};IntersectionObserver.prototype.unobserve=function(target){this._observationTargets=this._observationTargets.filter(function(item){return item.element!=target;});if(!this._observationTargets.length){this._unmonitorIntersections();this._unregisterInstance();}};IntersectionObserver.prototype.disconnect=function(){this._observationTargets=[];this._unmonitorIntersections();this._unregisterInstance();};IntersectionObserver.prototype.takeRecords=function(){var records=this._queuedEntries.slice();this._queuedEntries=[];return records;};IntersectionObserver.prototype._initThresholds=function(opt_threshold){var threshold=opt_threshold||[0];if(!Array.isArray(threshold))threshold=[threshold];return threshold.sort().filter(function(t,i,a){if(typeof t!='number'||isNaN(t)||t<0||t>1){throw new Error('threshold must be a number between 0 and 1 inclusively');}
return t!==a[i-1];});};IntersectionObserver.prototype._parseRootMargin=function(opt_rootMargin){var marginString=opt_rootMargin||'0px';var margins=marginString.split(/\s+/).map(function(margin){var parts=/^(-?\d*\.?\d+)(px|%)$/.exec(margin);if(!parts){throw new Error('rootMargin must be specified in pixels or percent');}
return{value:parseFloat(parts[1]),unit:parts[2]};});margins[1]=margins[1]||margins[0];margins[2]=margins[2]||margins[0];margins[3]=margins[3]||margins[1];return margins;};IntersectionObserver.prototype._monitorIntersections=function(){if(!this._monitoringIntersections){this._monitoringIntersections=true;if(this.POLL_INTERVAL){this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL);}
else{addEvent(window,'resize',this._checkForIntersections,true);addEvent(document,'scroll',this._checkForIntersections,true);if(this.USE_MUTATION_OBSERVER&&'MutationObserver'in window){this._domObserver=new MutationObserver(this._checkForIntersections);this._domObserver.observe(document,{attributes:true,childList:true,characterData:true,subtree:true});}}}};IntersectionObserver.prototype._unmonitorIntersections=function(){if(this._monitoringIntersections){this._monitoringIntersections=false;clearInterval(this._monitoringInterval);this._monitoringInterval=null;removeEvent(window,'resize',this._checkForIntersections,true);removeEvent(document,'scroll',this._checkForIntersections,true);if(this._domObserver){this._domObserver.disconnect();this._domObserver=null;}}};IntersectionObserver.prototype._checkForIntersections=function(){var rootIsInDom=this._rootIsInDom();var rootRect=rootIsInDom?this._getRootRect():getEmptyRect();this._observationTargets.forEach(function(item){var target=item.element;var targetRect=getBoundingClientRect(target);var rootContainsTarget=this._rootContainsTarget(target);var oldEntry=item.entry;var intersectionRect=rootIsInDom&&rootContainsTarget&&this._computeTargetAndRootIntersection(target,rootRect);var newEntry=item.entry=new IntersectionObserverEntry({time:now(),target:target,boundingClientRect:targetRect,rootBounds:rootRect,intersectionRect:intersectionRect});if(!oldEntry){this._queuedEntries.push(newEntry);}else if(rootIsInDom&&rootContainsTarget){if(this._hasCrossedThreshold(oldEntry,newEntry)){this._queuedEntries.push(newEntry);}}else{if(oldEntry&&oldEntry.isIntersecting){this._queuedEntries.push(newEntry);}}},this);if(this._queuedEntries.length){this._callback(this.takeRecords(),this);}};IntersectionObserver.prototype._computeTargetAndRootIntersection=function(target,rootRect){if(window.getComputedStyle(target).display=='none')return;var targetRect=getBoundingClientRect(target);var intersectionRect=targetRect;var parent=getParentNode(target);var atRoot=false;while(!atRoot){var parentRect=null;var parentComputedStyle=parent.nodeType==1?window.getComputedStyle(parent):{};if(parentComputedStyle.display=='none')return;if(parent==this.root||parent==document){atRoot=true;parentRect=rootRect;}else{if(parent!=document.body&&parent!=document.documentElement&&parentComputedStyle.overflow!='visible'){parentRect=getBoundingClientRect(parent);}}
if(parentRect){intersectionRect=computeRectIntersection(parentRect,intersectionRect);if(!intersectionRect)break;}
parent=getParentNode(parent);}
return intersectionRect;};IntersectionObserver.prototype._getRootRect=function(){var rootRect;if(this.root){rootRect=getBoundingClientRect(this.root);}else{var html=document.documentElement;var body=document.body;rootRect={top:0,left:0,right:html.clientWidth||body.clientWidth,width:html.clientWidth||body.clientWidth,bottom:html.clientHeight||body.clientHeight,height:html.clientHeight||body.clientHeight};}
return this._expandRectByRootMargin(rootRect);};IntersectionObserver.prototype._expandRectByRootMargin=function(rect){var margins=this._rootMarginValues.map(function(margin,i){return margin.unit=='px'?margin.value:margin.value*(i%2?rect.width:rect.height)/100;});var newRect={top:rect.top-margins[0],right:rect.right+margins[1],bottom:rect.bottom+margins[2],left:rect.left-margins[3]};newRect.width=newRect.right-newRect.left;newRect.height=newRect.bottom-newRect.top;return newRect;};IntersectionObserver.prototype._hasCrossedThreshold=function(oldEntry,newEntry){var oldRatio=oldEntry&&oldEntry.isIntersecting?oldEntry.intersectionRatio||0:-1;var newRatio=newEntry.isIntersecting?newEntry.intersectionRatio||0:-1;if(oldRatio===newRatio)return;for(var i=0;i<this.thresholds.length;i++){var threshold=this.thresholds[i];if(threshold==oldRatio||threshold==newRatio||threshold<oldRatio!==threshold<newRatio){return true;}}};IntersectionObserver.prototype._rootIsInDom=function(){return!this.root||containsDeep(document,this.root);};IntersectionObserver.prototype._rootContainsTarget=function(target){return containsDeep(this.root||document,target);};IntersectionObserver.prototype._registerInstance=function(){if(registry.indexOf(this)<0){registry.push(this);}};IntersectionObserver.prototype._unregisterInstance=function(){var index=registry.indexOf(this);if(index!=-1)registry.splice(index,1);};function now(){return window.performance&&performance.now&&performance.now();}
function throttle(fn,timeout){var timer=null;return function(){if(!timer){timer=setTimeout(function(){fn();timer=null;},timeout);}};}
function addEvent(node,event,fn,opt_useCapture){if(typeof node.addEventListener=='function'){node.addEventListener(event,fn,opt_useCapture||false);}
else if(typeof node.attachEvent=='function'){node.attachEvent('on'+event,fn);}}
function removeEvent(node,event,fn,opt_useCapture){if(typeof node.removeEventListener=='function'){node.removeEventListener(event,fn,opt_useCapture||false);}
else if(typeof node.detatchEvent=='function'){node.detatchEvent('on'+event,fn);}}
function computeRectIntersection(rect1,rect2){var top=Math.max(rect1.top,rect2.top);var bottom=Math.min(rect1.bottom,rect2.bottom);var left=Math.max(rect1.left,rect2.left);var right=Math.min(rect1.right,rect2.right);var width=right-left;var height=bottom-top;return(width>=0&&height>=0)&&{top:top,bottom:bottom,left:left,right:right,width:width,height:height};}
function getBoundingClientRect(el){var rect;try{rect=el.getBoundingClientRect();}catch(err){}
if(!rect)return getEmptyRect();if(!(rect.width&&rect.height)){rect={top:rect.top,right:rect.right,bottom:rect.bottom,left:rect.left,width:rect.right-rect.left,height:rect.bottom-rect.top};}
return rect;}
function getEmptyRect(){return{top:0,bottom:0,left:0,right:0,width:0,height:0};}
function containsDeep(parent,child){var node=child;while(node){if(node==parent)return true;node=getParentNode(node);}
return false;}
function getParentNode(node){var parent=node.parentNode;if(parent&&parent.nodeType==11&&parent.host){return parent.host;}
if(parent&&parent.assignedSlot){return parent.assignedSlot.parentNode;}
return parent;}
window.IntersectionObserver=IntersectionObserver;window.IntersectionObserverEntry=IntersectionObserverEntry;}(window,document));
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
!function(e){var n=!1;if("function"==typeof define&&define.amd&&(define(e),n=!0),"object"==typeof exports&&(module.exports=e(),n=!0),!n){var o=window.Cookies,t=window.Cookies=e();t.noConflict=function(){return window.Cookies=o,t}}}(function(){function e(){for(var e=0,n={};e<arguments.length;e++){var o=arguments[e];for(var t in o)n[t]=o[t]}return n}return function n(o){function t(n,r,i){var c;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(i=e({path:"/"},t.defaults,i)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}i.expires=i.expires?i.expires.toUTCString():"";try{c=JSON.stringify(r),/^[\{\[]/.test(c)&&(r=c)}catch(e){}r=o.write?o.write(r,n):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=(n=(n=encodeURIComponent(String(n))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var s="";for(var f in i)i[f]&&(s+="; "+f,!0!==i[f]&&(s+="="+i[f]));return document.cookie=n+"="+r+s}n||(c={});for(var p=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,u=0;u<p.length;u++){var l=p[u].split("="),C=l.slice(1).join("=");this.json||'"'!==C.charAt(0)||(C=C.slice(1,-1));try{var g=l[0].replace(d,decodeURIComponent);if(C=o.read?o.read(C,g):o(C,g)||C.replace(d,decodeURIComponent),this.json)try{C=JSON.parse(C)}catch(e){}if(n===g){c=C;break}n||(c[g]=C)}catch(e){}}return c}}return t.set=t,t.get=function(e){return t.call(t,e)},t.getJSON=function(){return t.apply({json:!0},[].slice.call(arguments))},t.defaults={},t.remove=function(n,o){t(n,"",e(o,{expires:-1}))},t.withConverter=n,t}(function(){})});
/* Polyfill service v3.16.0
 * For detailed credits and licence information see https://github.com/financial-times/polyfill-service.
 *
 * UA detected: ie/11.0.0
 * Features requested: default
 *
 * - Array.from, License: CC0 (required by "default")
 * - Array.of, License: MIT (required by "default")
 * - Array.prototype.fill, License: CC0 (required by "default")
 * - Event, License: CC0 (required by "default", "CustomEvent", "Promise")
 * - CustomEvent, License: CC0 (required by "default")
 * - _DOMTokenList, License: CC0 (required by "DOMTokenList", "default")
 * - DOMTokenList, License: CC0 (required by "default")
 * - _mutation, License: CC0 (required by "Element.prototype.after", "default", "Element.prototype.append", "Element.prototype.before", "Element.prototype.prepend", "Element.prototype.remove", "Element.prototype.replaceWith")
 * - Element.prototype.after, License: CC0 (required by "default")
 * - Element.prototype.append, License: CC0 (required by "default")
 * - Element.prototype.before, License: CC0 (required by "default")
 * - Element.prototype.matches, License: CC0 (required by "default", "Element.prototype.closest")
 * - Element.prototype.closest, License: CC0 (required by "default")
 * - Element.prototype.prepend, License: CC0 (required by "default")
 * - Element.prototype.remove, License: CC0 (required by "default")
 * - Element.prototype.replaceWith, License: CC0 (required by "default")
 * - Symbol, License: MIT (required by "Map", "default", "Set", "Symbol.iterator", "Symbol.species")
 * - Symbol.iterator, License: MIT (required by "Map", "default", "Set")
 * - Symbol.species, License: MIT (required by "Map", "default", "Set")
 * - Number.isNaN, License: MIT (required by "default", "Map", "Set")
 * - Map, License: CC0 (required by "default")
 * - Node.prototype.contains, License: CC0 (required by "default")
 * - Object.assign, License: CC0 (required by "default")
 * - Promise, License: MIT (required by "default")
 * - Set, License: CC0 (required by "default")
 * - String.prototype.endsWith, License: CC0 (required by "default")
 * - String.prototype.includes, License: CC0 (required by "default")
 * - String.prototype.startsWith, License: CC0 (required by "default")
 * - URL, License: CC0 (required by "default") */



// Element.prototype.matches
Element.prototype.matches = Element.prototype.webkitMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.mozMatchesSelector || function matches(selector) {

	var element = this;
	var elements = (element.document || element.ownerDocument).querySelectorAll(selector);
	var index = 0;

	while (elements[index] && elements[index] !== element) {
		++index;
	}

	return !!elements[index];
};

// Element.prototype.closest
Element.prototype.closest = function closest(selector) {
	var node = this;

	while (node) {
		if (node.matches(selector)) return node;
		else node = node.parentElement;
	}

	return null;
};



/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(a){if("Element"in a){a=a.Element.prototype;var h=Object,l=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},n=Array.prototype.indexOf||function(c){for(var b=0,k=this.length;b<k;b++)if(b in this&&this[b]===c)return b;return-1},f=function(c,b){this.name=c;this.code=DOMException[c];this.message=b},e=function(c,
b){if(""===b)throw new f("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(b))throw new f("INVALID_CHARACTER_ERR","The token must not contain space characters.");return n.call(c,b)},g=function(c){var b=l.call(c.getAttribute("class")||"");b=b?b.split(/\s+/):[];for(var k=0,e=b.length;k<e;k++)this.push(b[k]);this._updateClassName=function(){c.setAttribute("class",this.toString())}},d=g.prototype=[],m=function(){return new g(this)};f.prototype=Error.prototype;d.item=function(c){return this[c]||
null};d.contains=function(c){return!~e(this,c+"")};d.add=function(){var c=arguments,b=0,k=c.length,d=!1;do{var a=c[b]+"";~e(this,a)&&(this.push(a),d=!0)}while(++b<k);d&&this._updateClassName()};d.remove=function(){var c=arguments,b=0,d=c.length,a=!1,f;do{var g=c[b]+"";for(f=e(this,g);~f;)this.splice(f,1),a=!0,f=e(this,g)}while(++b<d);a&&this._updateClassName()};d.toggle=function(c,b){var a=this.contains(c),d=a?!0!==b&&"remove":!1!==b&&"add";if(d)this[d](c);return!0===b||!1===b?b:!a};d.replace=function(c,
b){var a=e(c+"");~a&&(this.splice(a,1,b),this._updateClassName())};d.toString=function(){return this.join(" ")};if(h.defineProperty){d={get:m,enumerable:!0,configurable:!0};try{h.defineProperty(a,"classList",d)}catch(c){if(void 0===c.number||-2146823252===c.number)d.enumerable=!1,h.defineProperty(a,"classList",d)}}else h.prototype.__defineGetter__&&a.__defineGetter__("classList",m)}}(self),function(){var a=document.createElement("_");a.classList.add("c1","c2");if(!a.classList.contains("c2")){var h=
function(a){var f=DOMTokenList.prototype[a];DOMTokenList.prototype[a]=function(a){var e,d=arguments.length;for(e=0;e<d;e++)a=arguments[e],f.call(this,a)}};h("add");h("remove")}a.classList.toggle("c3",!1);if(a.classList.contains("c3")){var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,f){return 1 in arguments&&!this.contains(a)===!f?f:l.call(this,a)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(a,f){var e=this.toString().split(" "),
g=e.indexOf(a+"");~g&&(e=e.slice(g),this.remove.apply(this,e),this.add(f),this.add.apply(this,e.slice(1)))});a=null}());
/*! UTF-8

© kovrigin
Все права разрешены
красивый дизайн должен иметь красивый код®

https://github.com/htmlpluscss/

*/

var CF = {};

(function(){

	CF.body = document.body;
	CF.width = window.innerWidth;
	CF.height = window.innerHeight;

	CF.touchDevice = "ontouchstart" in document.documentElement;

// resize

	var resizeTimeout = null;

	window.addEventListener("resize", function(){

		if (!resizeTimeout) {

			resizeTimeout = setTimeout(function() {

				resizeTimeout = null;
				CF.width = window.innerWidth;
				CF.height = window.innerHeight;

			}, 100);

		}

	});

// href="tel:"

	if(!CF.touchDevice || CF.width > 1200) {

		Array.prototype.forEach.call(document.querySelectorAll('[href^="tel"]'), function (el) {

			el.removeAttribute('href');

		});

	}

// склонение
	CF.declension = function(num, expressions) {
		var r;
		var count = num % 100;
		if (count > 4 && count < 21)
			r = expressions['2'];
		else {
			count = count % 10;
			if (count == 1)
				r = expressions['0'];
			else if (count > 1 && count < 5)
				r = expressions['1'];
			else
				r = expressions['2'];
		}
		return r;
	}

// загрузка калькулятора
	if (document.querySelector('.calculator')) {

		var script = document.createElement('script');

		script.type = 'text/javascript';
		script.async = true;
		script.src = SITE_TEMPLATE_PATH + '/js/calculator.all.min.js';

		document.head.appendChild(script);

	}

	// обработчик анимаций
	CF.cssAnimation = function(a){var b,c,d=document.createElement("cssanimation");switch(a){case'animation':b={"animation":"animationend","OAnimation":"oAnimationEnd","MozAnimation":"animationend","WebkitAnimation":"webkitAnimationEnd"};break;case'transition':b={"transition":"transitionend","OTransition":"oTransitionEnd","MozTransition":"transitionend","WebkitTransition":"webkitTransitionEnd"}}for(c in b)if(d.style[c]!==undefined)return b[c]}

	// Determine if an element is in the visible viewport
	CF.isInViewport = function(element) {
		var rect = element.getBoundingClientRect();
		return (rect.top >= 0 && rect.bottom <= CF.height);
	}

})();
(function(cookie){

//	Cookies.set('BITRIX_SM_infoCookie', 'close');


})(document.querySelector('.cookie'));
(function(){

	function addLink() {

		var body_element = document.getElementsByTagName('body')[0];
		var selection = document.getSelection();
		var pagelink = "<p>Источник: <a href='"+location.href+"'>"+location.href+"</a></p>";
		var copytext = selection + pagelink;
		var newdiv = document.createElement('div');

		body_element.appendChild(newdiv);
		newdiv.innerHTML = copytext;
		selection.selectAllChildren(newdiv);

		window.setTimeout(function(){

			body_element.removeChild(newdiv);

		},0);

	}

	document.querySelector('.article') && (document.querySelector('.article').oncopy = addLink);

})();


(function(){

	var forms = document.querySelectorAll('.form');

	Array.prototype.forEach.call(forms, function(form){

		var novalidate = false,
			showMoadalOk = form.getAttribute('data-ok'),
			formRequired = form.querySelectorAll('[required]'),
			formBtnSubmit = form.querySelector('.form__submit');

		// отправка формы
		form.addEventListener('submit', function(e) {

			e.preventDefault();

			var novalidate = false,
				formData = new FormData(form);

			Array.prototype.forEach.call(formRequired, function(input){

				if(input.getAttribute('type') == 'checkbox') {

					if(input.checked){

						input.parentNode.classList.remove('checkbox--error');

					}
					else {

						input.parentNode.classList.add('checkbox--error');
						novalidate = true;

					}

				}

				else {

					if(input.classList.contains('input-label__input')){

						errorInputLabel(input);

					}

					if(!input.value){

						novalidate = true;

					}

				}

			});


			if(!novalidate){

				var xhr = new XMLHttpRequest();

				xhr.open("POST", form.getAttribute('action'));
				xhr.send(formData);

				// reset

				formBtnSubmit && formBtnSubmit.setAttribute('disabled','disabled');

				xhr.onreadystatechange = function() {

					if (xhr.readyState != 4){

						return;

					}

					if (xhr.status == 200) {

						form.reset();

						Array.prototype.forEach.call(inputLabel, function(el){

							focusInputLabel(el);

						});

						if(showMoadalOk) {

							CF.modalShow('ok',showMoadalOk.split('|')[0],showMoadalOk.split('|')[1]);

						}

					} else {

						alert('ошибка ' + xhr.status);

					}

					formBtnSubmit && formBtnSubmit.removeAttribute('disabled');

				}
			}
		});
	});


// input-label

	var inputLabel = document.querySelectorAll('.input-label__input');

	function focusInputLabel(el,required){

		el.value ?
			el.parentNode.classList.add('input-label--no-empty'):
			el.parentNode.classList.remove('input-label--no-empty');

		if(required && el.getAttribute('required') !== null) {

			errorInputLabel(el);

		}

	}

	function errorInputLabel(el){

		el.value ?
			el.parentNode.classList.remove('input-label--error'):
			el.parentNode.classList.add('input-label--error');

	}

	Array.prototype.forEach.call(inputLabel, function(el){

		el.addEventListener('focus', function() {

			focusInputLabel(el);

		});

		el.addEventListener('keyup', function() {

			focusInputLabel(el,true);

		});

		el.addEventListener('blur', function() {

			focusInputLabel(el,true);

		});

		focusInputLabel(el);

	});

// checked

	var checkbox = document.querySelectorAll('.checkbox');

	Array.prototype.forEach.call(checkbox, function(el){

		var input = el.querySelector('input');

		input.addEventListener('change', function() {

			if(input.checked) {

				el.classList.remove('checkbox--error');

			}

		});

	});

})();


(function(geo){

	if(geo) {

		var btnTrue = geo.querySelector('.header__geo-confirm-true'),
			confirmWindow = geo.querySelector('.header__geo-confirm');

		btnTrue.addEventListener('click', function () {

            var city = geo.querySelector('.header__geo-confirm-name'),
                current = geo.querySelector('.header__geo-current');

            current.textContent = city.textContent;

			confirmWindow.classList.add('hide');

            Cookies.set('BITRIX_SM_GEO_ACCEPT', 1, {domain: location.hostname});
		});

		if(!Cookies.get('BITRIX_SM_GEO_ACCEPT') || Cookies.get('BITRIX_SM_GEO_ACCEPT') === '0') {

			confirmWindow.classList.remove('hide');

		}

	}

})(document.querySelector('.header__geo'));
(function () {

	var yaCounterId = '51123644',
		goals = [
			// home
			{
				skipPages: ['/loans/ease/', '/loans/secured/', '/loans/ways/'],
				selector: '.callback',
				event: 'submit',
				yandex: {
					target: 'CallbackMain'
				},
				google: {
					category: 'Callback',
					action: 'submit',
					label: 'Main'
				}
			},
			{
				page: '/',
				selector: '.consultation',
				event: 'submit',
				yandex: {
					target: 'ConsultationMain'
				},
				google: {
					category: 'Form',
					action: 'submit',
					label: 'ConsultationMain'
				}
			},
			{
				page: '/',
				selector: '.promo__item--loan .btn',
				event: 'click',
				yandex: {
					target: 'DetailZaym'
				},
				google: {
					category: 'Button',
					action: 'click',
					label: 'DetailZaym'
				}
			},
			{
				page: '/',
				selector: '.promo__item--auto .btn',
				event: 'click',
				yandex: {
					target: 'DetailAuto'
				},
				google: {
					category: 'Button',
					action: 'click',
					label: 'DetailAuto'
				}

			},
			// loan (ease)
			{
				page: '/loans/ease/',
				selector: '.callback',
				event: 'submit',
				yandex: {
					target: 'ZaymCallback'
				},
				google: {
					category: 'Callback',
					action: 'submit',
					label: 'Zaym'
				}

			},
			{
				page: '/loans/ease/',
				selector: '.consultation',
				event: 'submit',
				yandex: {
					target: 'ConsultationZaym'
				},
				google: {
					category: 'Form',
					action: 'submit',
					label: 'ConsultationZaym'
				}

			},
			{
				page: '/loans/ease/',
				selector: '.calculator__form',
				event: 'submit',
				yandex: {
					target: 'ZaymForm'
				},
				google: {
					category: 'Form',
					action: 'submit',
					label: 'Zaym'
				}
			},

			// loan (auto)
			{
				page: '/loans/secured/',
				selector: '.callback',
				event: 'submit',
				yandex: {
					target: 'AutoCallback'
				},
				google: {
					category: 'Callback',
					action: 'submit',
					label: 'Auto'
				}
			},
			{
				page: '/loans/secured/',
				selector: '.consultation',
				event: 'submit',
				yandex: {
					target: 'ConsultationAuto'
				},
				google: {
					category: 'Form',
					action: 'submit',
					label: 'ConsultationAuto'
				}

			},
			{
				page: '/loans/secured/',
				selector: '.calculator__form',
				event: 'submit',
				yandex: {
					target: 'AutoForm'
				},
				google: {
					category: 'Form',
					action: 'submit',
					label: 'Auto'
				}

			},

			// ways
			{
				page: '/loans/ways/',
				selector: '.callback',
				event: 'submit',
				yandex: {
					target: 'HowCallback'
				},
				google: {
					category: 'Callback',
					action: 'submit',
					label: 'How'
				}
			},
			{
				page: '/loans/ways/',
				selector: '.ways__item:first-child .btn',
				event: 'click',
				yandex: {
					target: 'HowForm'
				},
				google: {
					category: 'Form',
					action: 'submit',
					label: 'How'
				}
			},

			// Получение денег
			{
				page: '/loans/secured/received/',
				selector: '.callback',
				event: 'submit',
				yandex: {
					target: 'GetCallback'
				},
				google: {
					category: 'Callback',
					action: 'submit',
					label: 'Get'
				}
			},
			{
				page: '/loans/secured/received/',
				selector: '.calculator__form',
				event: 'submit',
				yandex: {
					target: 'GetForm'
				},
				google: {
					category: 'Form',
					action: 'submit',
					label: 'Get'
				}
			},

			// Способы погашения
			{
				page: '/loans/repay/',
				selector: '.repay__item--elecsnet .btn',
				event: 'click',
				yandex: {
					target: 'Elecsnet'
				},
				google: {
					category: 'Button',
					action: 'click',
					label: 'Elecsnet'
				}
			},
			{
				page: '/loans/repay/',
				selector: '.repay__item--transfer .btn',
				event: 'click',
				yandex: {
					target: 'Transfer'
				},
				google: {
					category: 'Button',
					action: 'click',
					label: 'Transfer'
				}
			},
			{
				page: '/loans/repay/',
				selector: '.repay__item--bank .btn',
				event: 'click',
				yandex: {
					target: 'Bank'
				},
				google: {
					category: 'Button',
					action: 'click',
					label: 'Bank'
				}
			},
		];

	goals.forEach(function (goal) {
		if (goal.page && goal.page !== location.pathname)
			return;

		if (goal.skipPages && goal.skipPages.indexOf(location.pathname) !== -1)
			return;

		var elements = document.querySelectorAll(goal.selector);

		[].forEach.call(elements, function (element) {
			element.addEventListener(goal.event, function () {
				if (goal.yandex && window['yaCounter' + yaCounterId]) {
					window['yaCounter' + yaCounterId].reachGoal(goal.yandex.target);
				}

				if (goal.google && window.gtag) {
					gtag('event', goal.google.action, {
						event_category: goal.google.category,
						event_label: goal.google.label
					});
				}
			});
		});
	});

})();
(function () {
    var Search = function (selector) {
        this.container = document.querySelector(selector);

        if (!this.container)
            return;

        this.action = this.container.getAttribute('action');

        this.input = this.container.querySelector('.header__search-input');
        this.btn = this.container.querySelector('.header__search-btn');
        this.result = this.container.querySelector('.header__search-result');

        this.init();
    };

    Search.prototype = {
        oldValue: '',
        run: false,
        minQueryLen: 2,
        cache: [],

        init: function () {
            var that = this;

            this.oldValue = this.input.value;

            this.btn.addEventListener('click', function () {
                that.open();
            });

            window.addEventListener('click', function (e) {
                if (!e.target.closest('.header__search')) {
                    that.close();
                }
            });

            this.input.addEventListener('keydown', function (e) {
                if (e.keyCode === 27) {
                    that.close();
                    return;
                }
            });

            this.input.addEventListener('focus', function () {
                if (that.result.innerHTML.length > 0)
                    that.showResult();
            });

            var timeout = 0;
            this.input.addEventListener('input', function () {
                if (timeout)
                    clearTimeout(timeout);

                if (that.input.value.length === 0) {
                    that.hideResult();
                    return;
                }

                timeout = setTimeout(function () {
                    that.search(that.input.value);
                }, 500);
            });
        },

        open: function () {
            var that = this;

            this.container.classList.toggle('header__search--show');

            setTimeout(function () {
                if(that.container.classList.contains('header__search--show')){
                    that.input.focus();
                }
                else {
                    document.body.classList.remove('body--bg');
                }
            }, 100);
        },

        close: function () {
            this.input.value = '';
            this.container.classList.remove('header__search--show');
            document.body.classList.remove('body--bg');
            this.hideResult();
        },

        showResult: function (result) {
            this.result.innerHTML = result || '';
            this.result.classList.remove('hide');
        },

        hideResult: function () {
            this.result.innerHTML = '';
            this.result.classList.add('hide');
        },

        search: function (value) {
            var that = this;

            if (this.run)
                return;

            if (value === this.oldValue)
                return;

            if (value.length <= this.minQueryLen)
                return;

            if (this.input.value in this.cache) {
                this.showResult(this.cache[this.input.value]);
            } else {
                this.run = true;

                this.loadResults(this.input.value).then(function (result) {
                    that.cache[that.input.value] = result;
                    that.showResult(result);
                    that.run = false;
                });
            }
        },

        loadResults: function (search) {
            var that = this;

            function formatParams(params) {
                return Object
                    .keys(params)
                    .map(function (key) {
                        return key + '=' + encodeURIComponent(params[key])
                    })
                    .join('&')
            }

            return new Promise(function (resolve, reject) {
                var xhr = new XMLHttpRequest();

                xhr.open('GET', that.action + '?' + formatParams({
                    'ajax_call': 'y',
                    'INPUT_ID': that.input.id,
                    'q': search,
                    'l': that.minQueryLen
                }));

                xhr.send();

                xhr.onload = function () {
                    if (this.status >= 200 && this.status < 300) {
                        resolve(xhr.response);
                    } else {
                        reject({
                            status: this.status,
                            statusText: this.statusText
                        });
                    }
                };

                xhr.onerror = function () {
                    reject({
                        status: this.status,
                        statusText: this.statusText
                    });
                };
            });
        }
    };

    new Search('.header__search');
})();
CF.loadMap = function (callback) {
    if (typeof ymaps === 'undefined') {
        var script = document.createElement('script');

        script.type = 'text/javascript';
        script.async = true;
        script.src = 'https://api-maps.yandex.ru/2.1/?lang=ru_RU';

        script.onload = function () {
            ymaps.ready(callback);
        };

        document.head.appendChild(script);
    } else {
        ymaps.ready(callback);
    }
};

(function(elems){

	Array.prototype.forEach.call(elems, function (el) {

		var btn = el.querySelector('.map-toggle__btn'),
			box = el.querySelector('.map-toggle__box');

		btn.addEventListener('click', function () {

			if(box.clientHeight > 0) {

				box.style.height = box.clientHeight + 'px';

			}

			setTimeout(function(){

				el.classList.toggle('map-toggle--hide');

			},100);

		});

	});

})(document.querySelectorAll('.map-toggle'));
CF.mask = function(elems){

	if(!elems.length) {

		return;

	}

	if (typeof Inputmask === 'undefined') {

		var script = document.createElement('script');

		script.type = 'text/javascript';
		script.async = true;
		script.src = SITE_TEMPLATE_PATH + '/js/inputmask.all.min.js';

		script.onload = function () {

			Inputmask.extendDefaults({
				oncomplete: function () {
					/*console.log('complete');*/
					this.classList.add('inputmask--complete');
				},
				onincomplete: function () {
					/*console.log('incomplete');*/
					this.classList.remove('inputmask--complete');
				},
				oncleared: function () {
					/*console.log('cleared');*/
				},
				onKeyValidation: function(key, result){
					/*console.log(key, result);*/
				}
			});

			setMask();

		};

		setTimeout(function(){

			document.head.appendChild(script);

		}, 5000);

	} else {

		setMask();

	}

	function setMask() {

		Array.prototype.forEach.call(elems, function(el){

			if(el.classList.contains('inputmask--phone')) {

				var maskInput = new Inputmask({
					mask: "+7 (999) 999-99-99",
					showMaskOnHover: false,
					placeholder: "+7 (___) ___-__-__"
				});

			}
			else if(el.classList.contains('inputmask--date')) {

				var maskInput = new Inputmask({
					alias: "datetime",
					showMaskOnHover: false,
					inputFormat: "dd.mm.yyyy",
					placeholder: "дд.мм.гггг"
				});

			}
			else if(el.classList.contains('inputmask--currency')) {

				var maskInput = new Inputmask({
					alias: "integer",
					suffix: ' рублей',
					groupSize: 3,
					autoGroup: true,
					groupSeparator: ' ',
					rightAlign: false
				});

			}
			else {

				var maskInput = new Inputmask(el.getAttribute('data-mask'));

			}

			maskInput.mask(el);

		});

	}

};

CF.mask(document.querySelectorAll('.inputmask'));
// btn all menu

CF.videoToggle = function(metod){

	var video = document.querySelectorAll('video');

	if(video.length) {

		Array.prototype.forEach.call(video, function (el) {

			metod == 'play' ? el.play() : el.pause();

		});

	}

};

(function(btnFullMenu){

	if(!btnFullMenu) {

		return;

	}

	btnFullMenu.addEventListener('click', function () {

		CF.videoToggle('stop');

		btnFullMenu.parentNode.classList.toggle('header__nav--show');

	});

	window.addEventListener("click", function(e){

		if(!e.target.closest('.header__nav') || e.target.closest('.header__search')){

			CF.videoToggle('play');
			btnFullMenu.parentNode.classList.remove('header__nav--show');

		}

	});

})(document.querySelector('.header__btn-full-menu'));

// bg
(function(search){

	if(!search) {

		return;

	}

	var menu = document.querySelector('.header__btn-full-menu').parentNode;

	window.addEventListener("click", function(e){

		if(menu.classList.contains('header__nav--show') || search.classList.contains('header__search--show')) {

			CF.videoToggle('stop');
			CF.body.classList.add('body--bg');

		}
		else {

			CF.videoToggle('play');

		}

	});

})(document.querySelector('.header__search'));


// menu mobile
(function(btn){

	if(!btn) {

		return;

	}

	btn.addEventListener('click', function () {

		if(CF.OpenMenu) {

			CF.body.classList.remove('menu-show');

			window.scrollTo(0,CF.windowScrollOld);

			CF.OpenMenu = false;

		}
		else {

			CF.OpenMenu = true;

			// записываем значение скролла страницы
			CF.windowScrollOld = window.pageYOffset;
			window.scrollTo(0,0);

			CF.body.classList.add('menu-show');

		}

	});

})(document.querySelector('.header__btn-menu-toggle'));

(function(){

	var modal = document.querySelectorAll('.modal'),
		box = document.querySelectorAll('.modal__box'),
		items = document.querySelectorAll('.modal__item'),
		wrapper = document.querySelector('.wrapper'),
		videoBox = document.getElementById('modal-video'),
		activeItem = null;

	// клик по фону или кнопкам закрыть
	Array.prototype.forEach.call(modal, function (el) {

		el.addEventListener('click', function (e) {

			if(e.target.classList.contains('modal') || e.target.classList.contains('modal__close')){

				CF.hideModal();

			}

		});

	});

	CF.hideModal = function() {

		CF.videoToggle('play');

		Array.prototype.forEach.call(modal, function (el) {

			el.classList.add('hidden-visible');

		});

		CF.body.classList.remove('modal-show');
		wrapper.style.top = 0;
		window.scrollTo(0,CF.windowScrollOld);

		activeItem = false;

		// clear video
		if (videoBox){

			videoBox.innerHTML = '';

		}

	};

	CF.modalShow = function (selector,title,text) {

		CF.videoToggle('stop');

		// если модальные окна не показаны
        if (!activeItem) {

			CF.windowScrollOld = window.pageYOffset;

			wrapper.style.top = -CF.windowScrollOld + 'px';

		}

        activeItem = null;

		// ищем активное окно и его бокс
		Array.prototype.forEach.call(items, function(el){

			if(el.classList.contains('modal__item--' + selector)) {

				el.classList.remove('hidden-visible');

				activeItem = el;

			}
			else {

				el.classList.add('hidden-visible');

			}

		});

        if (!activeItem) {
            console.warn('Modal "%s" not found', selector);
			return;
        }

        if (selector === 'ok') {

			if(!title) {

				title = '';

			}

			if(!text) {

				text = '';

			}

			activeItem.querySelector('.modal__title').innerHTML = title;
			activeItem.querySelector('.modal__text').innerHTML = text;

		}

		// скрываем все боксы
		Array.prototype.forEach.call(modal, function (el) {

			el.classList.add('hidden-visible');

		});

		Array.prototype.forEach.call(box, function (el) {

			el.classList.add('hidden-visible');

		});

		// показывыем активный бокс
		activeItem.closest('.modal').classList.remove('hidden-visible');
		activeItem.closest('.modal__box').classList.remove('hidden-visible');

		CF.body.classList.add('modal-show');
		window.scrollTo(0,0);

		// close menu
		if(CF.OpenMenu){

			CF.body.classList.remove('menu-show');
			CF.OpenMenu = false;

		}

		activeItem.focus();

		// вызывыем событие на активном окне
		if (typeof window.CustomEvent === 'function') {

			activeItem.dispatchEvent(new Event('modalShow'));

		}

	};

	// слушаем источник клика
	document.addEventListener('click', function (e) {

		var target = e.target;

		while (target !== this) {

			if (target.hasAttribute('data-modal')) {

				CF.modalShow(target.getAttribute('data-modal'));

			}

			target = target.parentNode;

		}

	});

})();

(function(elems){

	Array.prototype.forEach.call(elems, function (el) {

		var form = el.querySelector('.office-select__form'),
			input = el.querySelector('.office-select__input'),
			reset = el.querySelector('.office-select__reset');

		input.addEventListener('keyup', function () {

			reset.classList.toggle('hide', input.value.length < 4);

		});

		form.addEventListener('reset', function () {

			reset.classList.add('hide');
			input.value = '';

		});

	});

	// слушаем источник клика
	document.addEventListener('click', function (e) {

		var target = e.target;

		while (target !== this) {

			if (target.classList.contains('office-select__btn-toggle-rasp')) {

				var tableBox = target.parentNode.querySelector('.office-select__rasp'),
					height = tableBox.querySelector('table').clientHeight;

				if(tableBox.clientHeight > 0){

					height = 0;

				}

				tableBox.style.height = height + 'px';

			}

			target = target.parentNode;

		}

	});


})(document.querySelectorAll('.office-select'));

(function(modalPoll){

	if(modalPoll.length) {

		Array.prototype.forEach.call(modalPoll, function (el) {

			var radio = el.querySelectorAll('.modal-poll__radio input'),
				inputText = el.querySelector('.modal-poll__input-custom'),
				btn = el.querySelector('.modal__btn');

			function inputTextEvent(){

				btn.disabled = !inputText.value;

			}

			inputText.addEventListener('change', function() {

				inputTextEvent();

			});

			inputText.addEventListener('keyup', function() {

				inputTextEvent();

			});

			inputText.addEventListener('blur', function() {

				inputTextEvent();

			});

			Array.prototype.forEach.call(radio, function (elem) {

				elem.addEventListener('change', function () {

					btn.disabled = false;

					if (this.value === 'custom') {

						inputText.classList.remove('hide');
						inputText.disabled = false;
						inputText.focus();

						inputTextEvent();

					} else {

						inputText.classList.add('hide');
						inputText.disabled = true;

					}

				});

			});


		});

	}

})(document.querySelectorAll('.modal-poll'));
/** Этот код в продакшене больше не используется

(function(elems){

	Array.prototype.forEach.call(elems, function(timer){

		var clearIntervalID = null,
			formRepeat = timer.querySelector('.modal-timer__form'),
			btnRepeat = timer.querySelector('.modal-timer__submit'),
			timerText = timer.querySelector('.modal-timer__text'),
			timerValue = timer.querySelector('.modal-timer__value'),
			timerStart = parseInt(timerValue.getAttribute('data-time')),
			suf = timerValue.getAttribute('data-suf').split(',');

		function setup(){

			var count = timerStart;

			timerValue.textContent = count + ' ' + CF.declension(count,suf);
			timerText.classList.remove('hide');
			btnRepeat.classList.add('hide');

			clearInterval(clearIntervalID);

			clearIntervalID = setInterval(function(){

				if(count < 1) {

					clearInterval(clearIntervalID);

					timerText.classList.add('hide');
					btnRepeat.classList.remove('hide');

				}

				count--;
				timerValue.textContent = count + ' ' + CF.declension(count,suf);

			}, 1000);

		}

		timer.addEventListener('modalShow', function () {

			setup();

		});

		btnRepeat.addEventListener('click', function () {

			var xhr = new XMLHttpRequest(),
				formData = new FormData(formRepeat);

			xhr.open("GET", formRepeat.getAttribute('action'));

			setup();

			xhr.onreadystatechange = function() {

				if (xhr.readyState === 4) {

					console.log('запрос на новый код успешно отправлен.');

				}

				if (xhr.status !== 200) {

					console.log('ошибка ' + xhr.status);

				}

			}

			xhr.send(formData);

		});

	});

})(document.querySelectorAll('.modal-timer'));*/
(function(content){

	if(!content) {

		return;

	}

	var videos = content.querySelectorAll('[data-youtube]');

	if(videos.length) {

		Array.prototype.forEach.call(videos, function (video) {

			var id = video.getAttribute('data-youtube');

			video.addEventListener('click', function (e) {

				e.preventDefault();

				var iframe = document.createElement('iframe');

				iframe.setAttribute('allowfullscreen', '');
				iframe.setAttribute('allow', 'autoplay');
				iframe.setAttribute('src', 'https://www.youtube.com/embed/' + id + '?rel=0&showinfo=0&autoplay=1');

				video.appendChild(iframe);
				video.classList.add('youtube-iframe');

			});

		});

	}

})(document.querySelector('.article__content'));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuaW1hdGVTY3JvbGwubWluLmpzIiwiaW50ZXJzZWN0aW9uLW9ic2VydmVyLm1pbi5qcyIsImpzLmNvb2tpZS5taW4uanMiLCJwb2x5ZmlsbC5qcyIsImpzLmpzIiwiY29va2llLmpzIiwiY29weXRleHQuanMiLCJmb3JtLmpzIiwiZ2VvLmpzIiwiZ29hbHMuanMiLCJoZWFkZXItc2VhcmNoLmpzIiwibG9hZC1tYXAuanMiLCJtYXAtdG9nZ2xlLmpzIiwibWFzay5qcyIsIm1lbnUuanMiLCJtb2RhbC5qcyIsIm9mZmljZS1zZWxlY3QuanMiLCJwb2xsLmpzIiwidGltZXIuanMiLCJ2aWRlby5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDakxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDL0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcktBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEFuaW1hdGVTY3JvbGwubWluLmpzXG4vLyBTdW5tb2NrIFlhbmcgTm92LiAyMDE1XG5mdW5jdGlvbiBhbmltYXRlU2Nyb2xsKHQsbixpLGUsYSxyKXtlPWU/ZTowO3ZhciBvPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxzPW8uY2xpZW50SGVpZ2h0LHU9XCJzY3JvbGxNYXhZXCJpbiB3aW5kb3c/d2luZG93LnNjcm9sbE1heFk6by5zY3JvbGxIZWlnaHQtcyxjPXdpbmRvdy5wYWdlWU9mZnNldCxsPWMsaD1pc05hTih0KT90LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOjA7XCJjZW50ZXJcIj09PWE/KGwrPWlzTmFOKHQpP2gudG9wK2guaGVpZ2h0LzI6dCxsLT1zLzIsbC09ZSk6XCJib3R0b21cIj09PWE/KGwrPWguYm90dG9tfHx0LGwtPXMsbCs9ZSk6KGwrPWgudG9wfHx0LGwtPWUpLGw9TWF0aC5tYXgoTWF0aC5taW4odSxsKSwwKTt2YXIgZD1sLWMsZj17dGFyZ2V0WTpsLGRlbHRhWTpkLGR1cmF0aW9uOm4/bjowLGVhc2luZzppIGluIGFuaW1hdGVTY3JvbGwuRWFzaW5nP2FuaW1hdGVTY3JvbGwuRWFzaW5nW2ldOmFuaW1hdGVTY3JvbGwuRWFzaW5nLmxpbmVhcixvbkZpbmlzaDpyLHN0YXJ0VGltZTpEYXRlLm5vdygpLGxhc3RZOmMsc3RlcDphbmltYXRlU2Nyb2xsLnN0ZXB9O3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZi5zdGVwLmJpbmQoZikpfWFuaW1hdGVTY3JvbGwuRWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24odCl7cmV0dXJuIHR9LGVhc2VJblF1YWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQqdH0sZWFzZU91dFF1YWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQqKDItdCl9LGVhc2VJbk91dFF1YWQ6ZnVuY3Rpb24odCl7cmV0dXJuLjU+dD8yKnQqdDotMSsoNC0yKnQpKnR9LGVhc2VJbkN1YmljOmZ1bmN0aW9uKHQpe3JldHVybiB0KnQqdH0sZWFzZU91dEN1YmljOmZ1bmN0aW9uKHQpe3JldHVybi0tdCp0KnQrMX0sZWFzZUluT3V0Q3ViaWM6ZnVuY3Rpb24odCl7cmV0dXJuLjU+dD80KnQqdCp0Oih0LTEpKigyKnQtMikqKDIqdC0yKSsxfSxlYXNlSW5RdWFydDpmdW5jdGlvbih0KXtyZXR1cm4gdCp0KnQqdH0sZWFzZU91dFF1YXJ0OmZ1bmN0aW9uKHQpe3JldHVybiAxLSAtLXQqdCp0KnR9LGVhc2VJbk91dFF1YXJ0OmZ1bmN0aW9uKHQpe3JldHVybi41PnQ/OCp0KnQqdCp0OjEtOCotLXQqdCp0KnR9LGVhc2VJblF1aW50OmZ1bmN0aW9uKHQpe3JldHVybiB0KnQqdCp0KnR9LGVhc2VPdXRRdWludDpmdW5jdGlvbih0KXtyZXR1cm4gMSstLXQqdCp0KnQqdH0sZWFzZUluT3V0UXVpbnQ6ZnVuY3Rpb24odCl7cmV0dXJuLjU+dD8xNip0KnQqdCp0KnQ6MSsxNiotLXQqdCp0KnQqdH19LGFuaW1hdGVTY3JvbGwuc3RlcD1mdW5jdGlvbigpe2lmKHRoaXMubGFzdFkhPT13aW5kb3cucGFnZVlPZmZzZXQmJnRoaXMub25GaW5pc2gpcmV0dXJuIHZvaWQgdGhpcy5vbkZpbmlzaCgpO3ZhciB0PU1hdGgubWluKChEYXRlLm5vdygpLXRoaXMuc3RhcnRUaW1lKS90aGlzLmR1cmF0aW9uLDEpLG49dGhpcy50YXJnZXRZLSgxLXRoaXMuZWFzaW5nKHQpKSp0aGlzLmRlbHRhWTt3aW5kb3cuc2Nyb2xsVG8od2luZG93LnNjcm9sbFgsbiksMSE9PXQ/KHRoaXMubGFzdFk9d2luZG93LnBhZ2VZT2Zmc2V0LHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5zdGVwLmJpbmQodGhpcykpKTp0aGlzLm9uRmluaXNoJiZ0aGlzLm9uRmluaXNoKCl9O1xuIiwiXG4oZnVuY3Rpb24od2luZG93LGRvY3VtZW50KXsndXNlIHN0cmljdCc7aWYoJ0ludGVyc2VjdGlvbk9ic2VydmVyJ2luIHdpbmRvdyYmJ0ludGVyc2VjdGlvbk9ic2VydmVyRW50cnknaW4gd2luZG93JiYnaW50ZXJzZWN0aW9uUmF0aW8naW4gd2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyRW50cnkucHJvdG90eXBlKXtpZighKCdpc0ludGVyc2VjdGluZydpbiB3aW5kb3cuSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeS5wcm90b3R5cGUpKXtPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyRW50cnkucHJvdG90eXBlLCdpc0ludGVyc2VjdGluZycse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludGVyc2VjdGlvblJhdGlvPjA7fX0pO31cbnJldHVybjt9XG52YXIgcmVnaXN0cnk9W107ZnVuY3Rpb24gSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeShlbnRyeSl7dGhpcy50aW1lPWVudHJ5LnRpbWU7dGhpcy50YXJnZXQ9ZW50cnkudGFyZ2V0O3RoaXMucm9vdEJvdW5kcz1lbnRyeS5yb290Qm91bmRzO3RoaXMuYm91bmRpbmdDbGllbnRSZWN0PWVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdDt0aGlzLmludGVyc2VjdGlvblJlY3Q9ZW50cnkuaW50ZXJzZWN0aW9uUmVjdHx8Z2V0RW1wdHlSZWN0KCk7dGhpcy5pc0ludGVyc2VjdGluZz0hIWVudHJ5LmludGVyc2VjdGlvblJlY3Q7dmFyIHRhcmdldFJlY3Q9dGhpcy5ib3VuZGluZ0NsaWVudFJlY3Q7dmFyIHRhcmdldEFyZWE9dGFyZ2V0UmVjdC53aWR0aCp0YXJnZXRSZWN0LmhlaWdodDt2YXIgaW50ZXJzZWN0aW9uUmVjdD10aGlzLmludGVyc2VjdGlvblJlY3Q7dmFyIGludGVyc2VjdGlvbkFyZWE9aW50ZXJzZWN0aW9uUmVjdC53aWR0aCppbnRlcnNlY3Rpb25SZWN0LmhlaWdodDtpZih0YXJnZXRBcmVhKXt0aGlzLmludGVyc2VjdGlvblJhdGlvPU51bWJlcigoaW50ZXJzZWN0aW9uQXJlYS90YXJnZXRBcmVhKS50b0ZpeGVkKDQpKTt9ZWxzZXt0aGlzLmludGVyc2VjdGlvblJhdGlvPXRoaXMuaXNJbnRlcnNlY3Rpbmc/MTowO319XG5mdW5jdGlvbiBJbnRlcnNlY3Rpb25PYnNlcnZlcihjYWxsYmFjayxvcHRfb3B0aW9ucyl7dmFyIG9wdGlvbnM9b3B0X29wdGlvbnN8fHt9O2lmKHR5cGVvZiBjYWxsYmFjayE9J2Z1bmN0aW9uJyl7dGhyb3cgbmV3IEVycm9yKCdjYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24nKTt9XG5pZihvcHRpb25zLnJvb3QmJm9wdGlvbnMucm9vdC5ub2RlVHlwZSE9MSl7dGhyb3cgbmV3IEVycm9yKCdyb290IG11c3QgYmUgYW4gRWxlbWVudCcpO31cbnRoaXMuX2NoZWNrRm9ySW50ZXJzZWN0aW9ucz10aHJvdHRsZSh0aGlzLl9jaGVja0ZvckludGVyc2VjdGlvbnMuYmluZCh0aGlzKSx0aGlzLlRIUk9UVExFX1RJTUVPVVQpO3RoaXMuX2NhbGxiYWNrPWNhbGxiYWNrO3RoaXMuX29ic2VydmF0aW9uVGFyZ2V0cz1bXTt0aGlzLl9xdWV1ZWRFbnRyaWVzPVtdO3RoaXMuX3Jvb3RNYXJnaW5WYWx1ZXM9dGhpcy5fcGFyc2VSb290TWFyZ2luKG9wdGlvbnMucm9vdE1hcmdpbik7dGhpcy50aHJlc2hvbGRzPXRoaXMuX2luaXRUaHJlc2hvbGRzKG9wdGlvbnMudGhyZXNob2xkKTt0aGlzLnJvb3Q9b3B0aW9ucy5yb290fHxudWxsO3RoaXMucm9vdE1hcmdpbj10aGlzLl9yb290TWFyZ2luVmFsdWVzLm1hcChmdW5jdGlvbihtYXJnaW4pe3JldHVybiBtYXJnaW4udmFsdWUrbWFyZ2luLnVuaXQ7fSkuam9pbignICcpO31cbkludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5USFJPVFRMRV9USU1FT1VUPTEwMDtJbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuUE9MTF9JTlRFUlZBTD1udWxsO0ludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5VU0VfTVVUQVRJT05fT0JTRVJWRVI9dHJ1ZTtJbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUub2JzZXJ2ZT1mdW5jdGlvbih0YXJnZXQpe3ZhciBpc1RhcmdldEFscmVhZHlPYnNlcnZlZD10aGlzLl9vYnNlcnZhdGlvblRhcmdldHMuc29tZShmdW5jdGlvbihpdGVtKXtyZXR1cm4gaXRlbS5lbGVtZW50PT10YXJnZXQ7fSk7aWYoaXNUYXJnZXRBbHJlYWR5T2JzZXJ2ZWQpe3JldHVybjt9XG5pZighKHRhcmdldCYmdGFyZ2V0Lm5vZGVUeXBlPT0xKSl7dGhyb3cgbmV3IEVycm9yKCd0YXJnZXQgbXVzdCBiZSBhbiBFbGVtZW50Jyk7fVxudGhpcy5fcmVnaXN0ZXJJbnN0YW5jZSgpO3RoaXMuX29ic2VydmF0aW9uVGFyZ2V0cy5wdXNoKHtlbGVtZW50OnRhcmdldCxlbnRyeTpudWxsfSk7dGhpcy5fbW9uaXRvckludGVyc2VjdGlvbnMoKTt0aGlzLl9jaGVja0ZvckludGVyc2VjdGlvbnMoKTt9O0ludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS51bm9ic2VydmU9ZnVuY3Rpb24odGFyZ2V0KXt0aGlzLl9vYnNlcnZhdGlvblRhcmdldHM9dGhpcy5fb2JzZXJ2YXRpb25UYXJnZXRzLmZpbHRlcihmdW5jdGlvbihpdGVtKXtyZXR1cm4gaXRlbS5lbGVtZW50IT10YXJnZXQ7fSk7aWYoIXRoaXMuX29ic2VydmF0aW9uVGFyZ2V0cy5sZW5ndGgpe3RoaXMuX3VubW9uaXRvckludGVyc2VjdGlvbnMoKTt0aGlzLl91bnJlZ2lzdGVySW5zdGFuY2UoKTt9fTtJbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbigpe3RoaXMuX29ic2VydmF0aW9uVGFyZ2V0cz1bXTt0aGlzLl91bm1vbml0b3JJbnRlcnNlY3Rpb25zKCk7dGhpcy5fdW5yZWdpc3Rlckluc3RhbmNlKCk7fTtJbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUudGFrZVJlY29yZHM9ZnVuY3Rpb24oKXt2YXIgcmVjb3Jkcz10aGlzLl9xdWV1ZWRFbnRyaWVzLnNsaWNlKCk7dGhpcy5fcXVldWVkRW50cmllcz1bXTtyZXR1cm4gcmVjb3Jkczt9O0ludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5faW5pdFRocmVzaG9sZHM9ZnVuY3Rpb24ob3B0X3RocmVzaG9sZCl7dmFyIHRocmVzaG9sZD1vcHRfdGhyZXNob2xkfHxbMF07aWYoIUFycmF5LmlzQXJyYXkodGhyZXNob2xkKSl0aHJlc2hvbGQ9W3RocmVzaG9sZF07cmV0dXJuIHRocmVzaG9sZC5zb3J0KCkuZmlsdGVyKGZ1bmN0aW9uKHQsaSxhKXtpZih0eXBlb2YgdCE9J251bWJlcid8fGlzTmFOKHQpfHx0PDB8fHQ+MSl7dGhyb3cgbmV3IEVycm9yKCd0aHJlc2hvbGQgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDEgaW5jbHVzaXZlbHknKTt9XG5yZXR1cm4gdCE9PWFbaS0xXTt9KTt9O0ludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5fcGFyc2VSb290TWFyZ2luPWZ1bmN0aW9uKG9wdF9yb290TWFyZ2luKXt2YXIgbWFyZ2luU3RyaW5nPW9wdF9yb290TWFyZ2lufHwnMHB4Jzt2YXIgbWFyZ2lucz1tYXJnaW5TdHJpbmcuc3BsaXQoL1xccysvKS5tYXAoZnVuY3Rpb24obWFyZ2luKXt2YXIgcGFydHM9L14oLT9cXGQqXFwuP1xcZCspKHB4fCUpJC8uZXhlYyhtYXJnaW4pO2lmKCFwYXJ0cyl7dGhyb3cgbmV3IEVycm9yKCdyb290TWFyZ2luIG11c3QgYmUgc3BlY2lmaWVkIGluIHBpeGVscyBvciBwZXJjZW50Jyk7fVxucmV0dXJue3ZhbHVlOnBhcnNlRmxvYXQocGFydHNbMV0pLHVuaXQ6cGFydHNbMl19O30pO21hcmdpbnNbMV09bWFyZ2luc1sxXXx8bWFyZ2luc1swXTttYXJnaW5zWzJdPW1hcmdpbnNbMl18fG1hcmdpbnNbMF07bWFyZ2luc1szXT1tYXJnaW5zWzNdfHxtYXJnaW5zWzFdO3JldHVybiBtYXJnaW5zO307SW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLl9tb25pdG9ySW50ZXJzZWN0aW9ucz1mdW5jdGlvbigpe2lmKCF0aGlzLl9tb25pdG9yaW5nSW50ZXJzZWN0aW9ucyl7dGhpcy5fbW9uaXRvcmluZ0ludGVyc2VjdGlvbnM9dHJ1ZTtpZih0aGlzLlBPTExfSU5URVJWQUwpe3RoaXMuX21vbml0b3JpbmdJbnRlcnZhbD1zZXRJbnRlcnZhbCh0aGlzLl9jaGVja0ZvckludGVyc2VjdGlvbnMsdGhpcy5QT0xMX0lOVEVSVkFMKTt9XG5lbHNle2FkZEV2ZW50KHdpbmRvdywncmVzaXplJyx0aGlzLl9jaGVja0ZvckludGVyc2VjdGlvbnMsdHJ1ZSk7YWRkRXZlbnQoZG9jdW1lbnQsJ3Njcm9sbCcsdGhpcy5fY2hlY2tGb3JJbnRlcnNlY3Rpb25zLHRydWUpO2lmKHRoaXMuVVNFX01VVEFUSU9OX09CU0VSVkVSJiYnTXV0YXRpb25PYnNlcnZlcidpbiB3aW5kb3cpe3RoaXMuX2RvbU9ic2VydmVyPW5ldyBNdXRhdGlvbk9ic2VydmVyKHRoaXMuX2NoZWNrRm9ySW50ZXJzZWN0aW9ucyk7dGhpcy5fZG9tT2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudCx7YXR0cmlidXRlczp0cnVlLGNoaWxkTGlzdDp0cnVlLGNoYXJhY3RlckRhdGE6dHJ1ZSxzdWJ0cmVlOnRydWV9KTt9fX19O0ludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5fdW5tb25pdG9ySW50ZXJzZWN0aW9ucz1mdW5jdGlvbigpe2lmKHRoaXMuX21vbml0b3JpbmdJbnRlcnNlY3Rpb25zKXt0aGlzLl9tb25pdG9yaW5nSW50ZXJzZWN0aW9ucz1mYWxzZTtjbGVhckludGVydmFsKHRoaXMuX21vbml0b3JpbmdJbnRlcnZhbCk7dGhpcy5fbW9uaXRvcmluZ0ludGVydmFsPW51bGw7cmVtb3ZlRXZlbnQod2luZG93LCdyZXNpemUnLHRoaXMuX2NoZWNrRm9ySW50ZXJzZWN0aW9ucyx0cnVlKTtyZW1vdmVFdmVudChkb2N1bWVudCwnc2Nyb2xsJyx0aGlzLl9jaGVja0ZvckludGVyc2VjdGlvbnMsdHJ1ZSk7aWYodGhpcy5fZG9tT2JzZXJ2ZXIpe3RoaXMuX2RvbU9ic2VydmVyLmRpc2Nvbm5lY3QoKTt0aGlzLl9kb21PYnNlcnZlcj1udWxsO319fTtJbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuX2NoZWNrRm9ySW50ZXJzZWN0aW9ucz1mdW5jdGlvbigpe3ZhciByb290SXNJbkRvbT10aGlzLl9yb290SXNJbkRvbSgpO3ZhciByb290UmVjdD1yb290SXNJbkRvbT90aGlzLl9nZXRSb290UmVjdCgpOmdldEVtcHR5UmVjdCgpO3RoaXMuX29ic2VydmF0aW9uVGFyZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe3ZhciB0YXJnZXQ9aXRlbS5lbGVtZW50O3ZhciB0YXJnZXRSZWN0PWdldEJvdW5kaW5nQ2xpZW50UmVjdCh0YXJnZXQpO3ZhciByb290Q29udGFpbnNUYXJnZXQ9dGhpcy5fcm9vdENvbnRhaW5zVGFyZ2V0KHRhcmdldCk7dmFyIG9sZEVudHJ5PWl0ZW0uZW50cnk7dmFyIGludGVyc2VjdGlvblJlY3Q9cm9vdElzSW5Eb20mJnJvb3RDb250YWluc1RhcmdldCYmdGhpcy5fY29tcHV0ZVRhcmdldEFuZFJvb3RJbnRlcnNlY3Rpb24odGFyZ2V0LHJvb3RSZWN0KTt2YXIgbmV3RW50cnk9aXRlbS5lbnRyeT1uZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeSh7dGltZTpub3coKSx0YXJnZXQ6dGFyZ2V0LGJvdW5kaW5nQ2xpZW50UmVjdDp0YXJnZXRSZWN0LHJvb3RCb3VuZHM6cm9vdFJlY3QsaW50ZXJzZWN0aW9uUmVjdDppbnRlcnNlY3Rpb25SZWN0fSk7aWYoIW9sZEVudHJ5KXt0aGlzLl9xdWV1ZWRFbnRyaWVzLnB1c2gobmV3RW50cnkpO31lbHNlIGlmKHJvb3RJc0luRG9tJiZyb290Q29udGFpbnNUYXJnZXQpe2lmKHRoaXMuX2hhc0Nyb3NzZWRUaHJlc2hvbGQob2xkRW50cnksbmV3RW50cnkpKXt0aGlzLl9xdWV1ZWRFbnRyaWVzLnB1c2gobmV3RW50cnkpO319ZWxzZXtpZihvbGRFbnRyeSYmb2xkRW50cnkuaXNJbnRlcnNlY3Rpbmcpe3RoaXMuX3F1ZXVlZEVudHJpZXMucHVzaChuZXdFbnRyeSk7fX19LHRoaXMpO2lmKHRoaXMuX3F1ZXVlZEVudHJpZXMubGVuZ3RoKXt0aGlzLl9jYWxsYmFjayh0aGlzLnRha2VSZWNvcmRzKCksdGhpcyk7fX07SW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLl9jb21wdXRlVGFyZ2V0QW5kUm9vdEludGVyc2VjdGlvbj1mdW5jdGlvbih0YXJnZXQscm9vdFJlY3Qpe2lmKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCkuZGlzcGxheT09J25vbmUnKXJldHVybjt2YXIgdGFyZ2V0UmVjdD1nZXRCb3VuZGluZ0NsaWVudFJlY3QodGFyZ2V0KTt2YXIgaW50ZXJzZWN0aW9uUmVjdD10YXJnZXRSZWN0O3ZhciBwYXJlbnQ9Z2V0UGFyZW50Tm9kZSh0YXJnZXQpO3ZhciBhdFJvb3Q9ZmFsc2U7d2hpbGUoIWF0Um9vdCl7dmFyIHBhcmVudFJlY3Q9bnVsbDt2YXIgcGFyZW50Q29tcHV0ZWRTdHlsZT1wYXJlbnQubm9kZVR5cGU9PTE/d2luZG93LmdldENvbXB1dGVkU3R5bGUocGFyZW50KTp7fTtpZihwYXJlbnRDb21wdXRlZFN0eWxlLmRpc3BsYXk9PSdub25lJylyZXR1cm47aWYocGFyZW50PT10aGlzLnJvb3R8fHBhcmVudD09ZG9jdW1lbnQpe2F0Um9vdD10cnVlO3BhcmVudFJlY3Q9cm9vdFJlY3Q7fWVsc2V7aWYocGFyZW50IT1kb2N1bWVudC5ib2R5JiZwYXJlbnQhPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCYmcGFyZW50Q29tcHV0ZWRTdHlsZS5vdmVyZmxvdyE9J3Zpc2libGUnKXtwYXJlbnRSZWN0PWdldEJvdW5kaW5nQ2xpZW50UmVjdChwYXJlbnQpO319XG5pZihwYXJlbnRSZWN0KXtpbnRlcnNlY3Rpb25SZWN0PWNvbXB1dGVSZWN0SW50ZXJzZWN0aW9uKHBhcmVudFJlY3QsaW50ZXJzZWN0aW9uUmVjdCk7aWYoIWludGVyc2VjdGlvblJlY3QpYnJlYWs7fVxucGFyZW50PWdldFBhcmVudE5vZGUocGFyZW50KTt9XG5yZXR1cm4gaW50ZXJzZWN0aW9uUmVjdDt9O0ludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5fZ2V0Um9vdFJlY3Q9ZnVuY3Rpb24oKXt2YXIgcm9vdFJlY3Q7aWYodGhpcy5yb290KXtyb290UmVjdD1nZXRCb3VuZGluZ0NsaWVudFJlY3QodGhpcy5yb290KTt9ZWxzZXt2YXIgaHRtbD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7dmFyIGJvZHk9ZG9jdW1lbnQuYm9keTtyb290UmVjdD17dG9wOjAsbGVmdDowLHJpZ2h0Omh0bWwuY2xpZW50V2lkdGh8fGJvZHkuY2xpZW50V2lkdGgsd2lkdGg6aHRtbC5jbGllbnRXaWR0aHx8Ym9keS5jbGllbnRXaWR0aCxib3R0b206aHRtbC5jbGllbnRIZWlnaHR8fGJvZHkuY2xpZW50SGVpZ2h0LGhlaWdodDpodG1sLmNsaWVudEhlaWdodHx8Ym9keS5jbGllbnRIZWlnaHR9O31cbnJldHVybiB0aGlzLl9leHBhbmRSZWN0QnlSb290TWFyZ2luKHJvb3RSZWN0KTt9O0ludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5fZXhwYW5kUmVjdEJ5Um9vdE1hcmdpbj1mdW5jdGlvbihyZWN0KXt2YXIgbWFyZ2lucz10aGlzLl9yb290TWFyZ2luVmFsdWVzLm1hcChmdW5jdGlvbihtYXJnaW4saSl7cmV0dXJuIG1hcmdpbi51bml0PT0ncHgnP21hcmdpbi52YWx1ZTptYXJnaW4udmFsdWUqKGklMj9yZWN0LndpZHRoOnJlY3QuaGVpZ2h0KS8xMDA7fSk7dmFyIG5ld1JlY3Q9e3RvcDpyZWN0LnRvcC1tYXJnaW5zWzBdLHJpZ2h0OnJlY3QucmlnaHQrbWFyZ2luc1sxXSxib3R0b206cmVjdC5ib3R0b20rbWFyZ2luc1syXSxsZWZ0OnJlY3QubGVmdC1tYXJnaW5zWzNdfTtuZXdSZWN0LndpZHRoPW5ld1JlY3QucmlnaHQtbmV3UmVjdC5sZWZ0O25ld1JlY3QuaGVpZ2h0PW5ld1JlY3QuYm90dG9tLW5ld1JlY3QudG9wO3JldHVybiBuZXdSZWN0O307SW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLl9oYXNDcm9zc2VkVGhyZXNob2xkPWZ1bmN0aW9uKG9sZEVudHJ5LG5ld0VudHJ5KXt2YXIgb2xkUmF0aW89b2xkRW50cnkmJm9sZEVudHJ5LmlzSW50ZXJzZWN0aW5nP29sZEVudHJ5LmludGVyc2VjdGlvblJhdGlvfHwwOi0xO3ZhciBuZXdSYXRpbz1uZXdFbnRyeS5pc0ludGVyc2VjdGluZz9uZXdFbnRyeS5pbnRlcnNlY3Rpb25SYXRpb3x8MDotMTtpZihvbGRSYXRpbz09PW5ld1JhdGlvKXJldHVybjtmb3IodmFyIGk9MDtpPHRoaXMudGhyZXNob2xkcy5sZW5ndGg7aSsrKXt2YXIgdGhyZXNob2xkPXRoaXMudGhyZXNob2xkc1tpXTtpZih0aHJlc2hvbGQ9PW9sZFJhdGlvfHx0aHJlc2hvbGQ9PW5ld1JhdGlvfHx0aHJlc2hvbGQ8b2xkUmF0aW8hPT10aHJlc2hvbGQ8bmV3UmF0aW8pe3JldHVybiB0cnVlO319fTtJbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuX3Jvb3RJc0luRG9tPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMucm9vdHx8Y29udGFpbnNEZWVwKGRvY3VtZW50LHRoaXMucm9vdCk7fTtJbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuX3Jvb3RDb250YWluc1RhcmdldD1mdW5jdGlvbih0YXJnZXQpe3JldHVybiBjb250YWluc0RlZXAodGhpcy5yb290fHxkb2N1bWVudCx0YXJnZXQpO307SW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLl9yZWdpc3Rlckluc3RhbmNlPWZ1bmN0aW9uKCl7aWYocmVnaXN0cnkuaW5kZXhPZih0aGlzKTwwKXtyZWdpc3RyeS5wdXNoKHRoaXMpO319O0ludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5fdW5yZWdpc3Rlckluc3RhbmNlPWZ1bmN0aW9uKCl7dmFyIGluZGV4PXJlZ2lzdHJ5LmluZGV4T2YodGhpcyk7aWYoaW5kZXghPS0xKXJlZ2lzdHJ5LnNwbGljZShpbmRleCwxKTt9O2Z1bmN0aW9uIG5vdygpe3JldHVybiB3aW5kb3cucGVyZm9ybWFuY2UmJnBlcmZvcm1hbmNlLm5vdyYmcGVyZm9ybWFuY2Uubm93KCk7fVxuZnVuY3Rpb24gdGhyb3R0bGUoZm4sdGltZW91dCl7dmFyIHRpbWVyPW51bGw7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoIXRpbWVyKXt0aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zm4oKTt0aW1lcj1udWxsO30sdGltZW91dCk7fX07fVxuZnVuY3Rpb24gYWRkRXZlbnQobm9kZSxldmVudCxmbixvcHRfdXNlQ2FwdHVyZSl7aWYodHlwZW9mIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcj09J2Z1bmN0aW9uJyl7bm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LGZuLG9wdF91c2VDYXB0dXJlfHxmYWxzZSk7fVxuZWxzZSBpZih0eXBlb2Ygbm9kZS5hdHRhY2hFdmVudD09J2Z1bmN0aW9uJyl7bm9kZS5hdHRhY2hFdmVudCgnb24nK2V2ZW50LGZuKTt9fVxuZnVuY3Rpb24gcmVtb3ZlRXZlbnQobm9kZSxldmVudCxmbixvcHRfdXNlQ2FwdHVyZSl7aWYodHlwZW9mIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcj09J2Z1bmN0aW9uJyl7bm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LGZuLG9wdF91c2VDYXB0dXJlfHxmYWxzZSk7fVxuZWxzZSBpZih0eXBlb2Ygbm9kZS5kZXRhdGNoRXZlbnQ9PSdmdW5jdGlvbicpe25vZGUuZGV0YXRjaEV2ZW50KCdvbicrZXZlbnQsZm4pO319XG5mdW5jdGlvbiBjb21wdXRlUmVjdEludGVyc2VjdGlvbihyZWN0MSxyZWN0Mil7dmFyIHRvcD1NYXRoLm1heChyZWN0MS50b3AscmVjdDIudG9wKTt2YXIgYm90dG9tPU1hdGgubWluKHJlY3QxLmJvdHRvbSxyZWN0Mi5ib3R0b20pO3ZhciBsZWZ0PU1hdGgubWF4KHJlY3QxLmxlZnQscmVjdDIubGVmdCk7dmFyIHJpZ2h0PU1hdGgubWluKHJlY3QxLnJpZ2h0LHJlY3QyLnJpZ2h0KTt2YXIgd2lkdGg9cmlnaHQtbGVmdDt2YXIgaGVpZ2h0PWJvdHRvbS10b3A7cmV0dXJuKHdpZHRoPj0wJiZoZWlnaHQ+PTApJiZ7dG9wOnRvcCxib3R0b206Ym90dG9tLGxlZnQ6bGVmdCxyaWdodDpyaWdodCx3aWR0aDp3aWR0aCxoZWlnaHQ6aGVpZ2h0fTt9XG5mdW5jdGlvbiBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWwpe3ZhciByZWN0O3RyeXtyZWN0PWVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO31jYXRjaChlcnIpe31cbmlmKCFyZWN0KXJldHVybiBnZXRFbXB0eVJlY3QoKTtpZighKHJlY3Qud2lkdGgmJnJlY3QuaGVpZ2h0KSl7cmVjdD17dG9wOnJlY3QudG9wLHJpZ2h0OnJlY3QucmlnaHQsYm90dG9tOnJlY3QuYm90dG9tLGxlZnQ6cmVjdC5sZWZ0LHdpZHRoOnJlY3QucmlnaHQtcmVjdC5sZWZ0LGhlaWdodDpyZWN0LmJvdHRvbS1yZWN0LnRvcH07fVxucmV0dXJuIHJlY3Q7fVxuZnVuY3Rpb24gZ2V0RW1wdHlSZWN0KCl7cmV0dXJue3RvcDowLGJvdHRvbTowLGxlZnQ6MCxyaWdodDowLHdpZHRoOjAsaGVpZ2h0OjB9O31cbmZ1bmN0aW9uIGNvbnRhaW5zRGVlcChwYXJlbnQsY2hpbGQpe3ZhciBub2RlPWNoaWxkO3doaWxlKG5vZGUpe2lmKG5vZGU9PXBhcmVudClyZXR1cm4gdHJ1ZTtub2RlPWdldFBhcmVudE5vZGUobm9kZSk7fVxucmV0dXJuIGZhbHNlO31cbmZ1bmN0aW9uIGdldFBhcmVudE5vZGUobm9kZSl7dmFyIHBhcmVudD1ub2RlLnBhcmVudE5vZGU7aWYocGFyZW50JiZwYXJlbnQubm9kZVR5cGU9PTExJiZwYXJlbnQuaG9zdCl7cmV0dXJuIHBhcmVudC5ob3N0O31cbmlmKHBhcmVudCYmcGFyZW50LmFzc2lnbmVkU2xvdCl7cmV0dXJuIHBhcmVudC5hc3NpZ25lZFNsb3QucGFyZW50Tm9kZTt9XG5yZXR1cm4gcGFyZW50O31cbndpbmRvdy5JbnRlcnNlY3Rpb25PYnNlcnZlcj1JbnRlcnNlY3Rpb25PYnNlcnZlcjt3aW5kb3cuSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeT1JbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5O30od2luZG93LGRvY3VtZW50KSk7IiwiLyohXG4gKiBKYXZhU2NyaXB0IENvb2tpZSB2Mi4yLjBcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qcy1jb29raWUvanMtY29va2llXG4gKlxuICogQ29weXJpZ2h0IDIwMDYsIDIwMTUgS2xhdXMgSGFydGwgJiBGYWduZXIgQnJhY2tcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICovXG4hZnVuY3Rpb24oZSl7dmFyIG49ITE7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiYoZGVmaW5lKGUpLG49ITApLFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiYobW9kdWxlLmV4cG9ydHM9ZSgpLG49ITApLCFuKXt2YXIgbz13aW5kb3cuQ29va2llcyx0PXdpbmRvdy5Db29raWVzPWUoKTt0Lm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LkNvb2tpZXM9byx0fX19KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2Zvcih2YXIgZT0wLG49e307ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIG89YXJndW1lbnRzW2VdO2Zvcih2YXIgdCBpbiBvKW5bdF09b1t0XX1yZXR1cm4gbn1yZXR1cm4gZnVuY3Rpb24gbihvKXtmdW5jdGlvbiB0KG4scixpKXt2YXIgYztpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQpe2lmKGFyZ3VtZW50cy5sZW5ndGg+MSl7aWYoXCJudW1iZXJcIj09dHlwZW9mKGk9ZSh7cGF0aDpcIi9cIn0sdC5kZWZhdWx0cyxpKSkuZXhwaXJlcyl7dmFyIGE9bmV3IERhdGU7YS5zZXRNaWxsaXNlY29uZHMoYS5nZXRNaWxsaXNlY29uZHMoKSs4NjRlNSppLmV4cGlyZXMpLGkuZXhwaXJlcz1hfWkuZXhwaXJlcz1pLmV4cGlyZXM/aS5leHBpcmVzLnRvVVRDU3RyaW5nKCk6XCJcIjt0cnl7Yz1KU09OLnN0cmluZ2lmeShyKSwvXltcXHtcXFtdLy50ZXN0KGMpJiYocj1jKX1jYXRjaChlKXt9cj1vLndyaXRlP28ud3JpdGUocixuKTplbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHIpKS5yZXBsYWNlKC8lKDIzfDI0fDI2fDJCfDNBfDNDfDNFfDNEfDJGfDNGfDQwfDVCfDVEfDVFfDYwfDdCfDdEfDdDKS9nLGRlY29kZVVSSUNvbXBvbmVudCksbj0obj0obj1lbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKG4pKSkucmVwbGFjZSgvJSgyM3wyNHwyNnwyQnw1RXw2MHw3QykvZyxkZWNvZGVVUklDb21wb25lbnQpKS5yZXBsYWNlKC9bXFwoXFwpXS9nLGVzY2FwZSk7dmFyIHM9XCJcIjtmb3IodmFyIGYgaW4gaSlpW2ZdJiYocys9XCI7IFwiK2YsITAhPT1pW2ZdJiYocys9XCI9XCIraVtmXSkpO3JldHVybiBkb2N1bWVudC5jb29raWU9bitcIj1cIityK3N9bnx8KGM9e30pO2Zvcih2YXIgcD1kb2N1bWVudC5jb29raWU/ZG9jdW1lbnQuY29va2llLnNwbGl0KFwiOyBcIik6W10sZD0vKCVbMC05QS1aXXsyfSkrL2csdT0wO3U8cC5sZW5ndGg7dSsrKXt2YXIgbD1wW3VdLnNwbGl0KFwiPVwiKSxDPWwuc2xpY2UoMSkuam9pbihcIj1cIik7dGhpcy5qc29ufHwnXCInIT09Qy5jaGFyQXQoMCl8fChDPUMuc2xpY2UoMSwtMSkpO3RyeXt2YXIgZz1sWzBdLnJlcGxhY2UoZCxkZWNvZGVVUklDb21wb25lbnQpO2lmKEM9by5yZWFkP28ucmVhZChDLGcpOm8oQyxnKXx8Qy5yZXBsYWNlKGQsZGVjb2RlVVJJQ29tcG9uZW50KSx0aGlzLmpzb24pdHJ5e0M9SlNPTi5wYXJzZShDKX1jYXRjaChlKXt9aWYobj09PWcpe2M9QzticmVha31ufHwoY1tnXT1DKX1jYXRjaChlKXt9fXJldHVybiBjfX1yZXR1cm4gdC5zZXQ9dCx0LmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdC5jYWxsKHQsZSl9LHQuZ2V0SlNPTj1mdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KHtqc29uOiEwfSxbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpfSx0LmRlZmF1bHRzPXt9LHQucmVtb3ZlPWZ1bmN0aW9uKG4sbyl7dChuLFwiXCIsZShvLHtleHBpcmVzOi0xfSkpfSx0LndpdGhDb252ZXJ0ZXI9bix0fShmdW5jdGlvbigpe30pfSk7IiwiLyogUG9seWZpbGwgc2VydmljZSB2My4xNi4wXHJcbiAqIEZvciBkZXRhaWxlZCBjcmVkaXRzIGFuZCBsaWNlbmNlIGluZm9ybWF0aW9uIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZmluYW5jaWFsLXRpbWVzL3BvbHlmaWxsLXNlcnZpY2UuXHJcbiAqXHJcbiAqIFVBIGRldGVjdGVkOiBpZS8xMS4wLjBcclxuICogRmVhdHVyZXMgcmVxdWVzdGVkOiBkZWZhdWx0XHJcbiAqXHJcbiAqIC0gQXJyYXkuZnJvbSwgTGljZW5zZTogQ0MwIChyZXF1aXJlZCBieSBcImRlZmF1bHRcIilcclxuICogLSBBcnJheS5vZiwgTGljZW5zZTogTUlUIChyZXF1aXJlZCBieSBcImRlZmF1bHRcIilcclxuICogLSBBcnJheS5wcm90b3R5cGUuZmlsbCwgTGljZW5zZTogQ0MwIChyZXF1aXJlZCBieSBcImRlZmF1bHRcIilcclxuICogLSBFdmVudCwgTGljZW5zZTogQ0MwIChyZXF1aXJlZCBieSBcImRlZmF1bHRcIiwgXCJDdXN0b21FdmVudFwiLCBcIlByb21pc2VcIilcclxuICogLSBDdXN0b21FdmVudCwgTGljZW5zZTogQ0MwIChyZXF1aXJlZCBieSBcImRlZmF1bHRcIilcclxuICogLSBfRE9NVG9rZW5MaXN0LCBMaWNlbnNlOiBDQzAgKHJlcXVpcmVkIGJ5IFwiRE9NVG9rZW5MaXN0XCIsIFwiZGVmYXVsdFwiKVxyXG4gKiAtIERPTVRva2VuTGlzdCwgTGljZW5zZTogQ0MwIChyZXF1aXJlZCBieSBcImRlZmF1bHRcIilcclxuICogLSBfbXV0YXRpb24sIExpY2Vuc2U6IENDMCAocmVxdWlyZWQgYnkgXCJFbGVtZW50LnByb3RvdHlwZS5hZnRlclwiLCBcImRlZmF1bHRcIiwgXCJFbGVtZW50LnByb3RvdHlwZS5hcHBlbmRcIiwgXCJFbGVtZW50LnByb3RvdHlwZS5iZWZvcmVcIiwgXCJFbGVtZW50LnByb3RvdHlwZS5wcmVwZW5kXCIsIFwiRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlXCIsIFwiRWxlbWVudC5wcm90b3R5cGUucmVwbGFjZVdpdGhcIilcclxuICogLSBFbGVtZW50LnByb3RvdHlwZS5hZnRlciwgTGljZW5zZTogQ0MwIChyZXF1aXJlZCBieSBcImRlZmF1bHRcIilcclxuICogLSBFbGVtZW50LnByb3RvdHlwZS5hcHBlbmQsIExpY2Vuc2U6IENDMCAocmVxdWlyZWQgYnkgXCJkZWZhdWx0XCIpXHJcbiAqIC0gRWxlbWVudC5wcm90b3R5cGUuYmVmb3JlLCBMaWNlbnNlOiBDQzAgKHJlcXVpcmVkIGJ5IFwiZGVmYXVsdFwiKVxyXG4gKiAtIEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMsIExpY2Vuc2U6IENDMCAocmVxdWlyZWQgYnkgXCJkZWZhdWx0XCIsIFwiRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdFwiKVxyXG4gKiAtIEVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3QsIExpY2Vuc2U6IENDMCAocmVxdWlyZWQgYnkgXCJkZWZhdWx0XCIpXHJcbiAqIC0gRWxlbWVudC5wcm90b3R5cGUucHJlcGVuZCwgTGljZW5zZTogQ0MwIChyZXF1aXJlZCBieSBcImRlZmF1bHRcIilcclxuICogLSBFbGVtZW50LnByb3RvdHlwZS5yZW1vdmUsIExpY2Vuc2U6IENDMCAocmVxdWlyZWQgYnkgXCJkZWZhdWx0XCIpXHJcbiAqIC0gRWxlbWVudC5wcm90b3R5cGUucmVwbGFjZVdpdGgsIExpY2Vuc2U6IENDMCAocmVxdWlyZWQgYnkgXCJkZWZhdWx0XCIpXHJcbiAqIC0gU3ltYm9sLCBMaWNlbnNlOiBNSVQgKHJlcXVpcmVkIGJ5IFwiTWFwXCIsIFwiZGVmYXVsdFwiLCBcIlNldFwiLCBcIlN5bWJvbC5pdGVyYXRvclwiLCBcIlN5bWJvbC5zcGVjaWVzXCIpXHJcbiAqIC0gU3ltYm9sLml0ZXJhdG9yLCBMaWNlbnNlOiBNSVQgKHJlcXVpcmVkIGJ5IFwiTWFwXCIsIFwiZGVmYXVsdFwiLCBcIlNldFwiKVxyXG4gKiAtIFN5bWJvbC5zcGVjaWVzLCBMaWNlbnNlOiBNSVQgKHJlcXVpcmVkIGJ5IFwiTWFwXCIsIFwiZGVmYXVsdFwiLCBcIlNldFwiKVxyXG4gKiAtIE51bWJlci5pc05hTiwgTGljZW5zZTogTUlUIChyZXF1aXJlZCBieSBcImRlZmF1bHRcIiwgXCJNYXBcIiwgXCJTZXRcIilcclxuICogLSBNYXAsIExpY2Vuc2U6IENDMCAocmVxdWlyZWQgYnkgXCJkZWZhdWx0XCIpXHJcbiAqIC0gTm9kZS5wcm90b3R5cGUuY29udGFpbnMsIExpY2Vuc2U6IENDMCAocmVxdWlyZWQgYnkgXCJkZWZhdWx0XCIpXHJcbiAqIC0gT2JqZWN0LmFzc2lnbiwgTGljZW5zZTogQ0MwIChyZXF1aXJlZCBieSBcImRlZmF1bHRcIilcclxuICogLSBQcm9taXNlLCBMaWNlbnNlOiBNSVQgKHJlcXVpcmVkIGJ5IFwiZGVmYXVsdFwiKVxyXG4gKiAtIFNldCwgTGljZW5zZTogQ0MwIChyZXF1aXJlZCBieSBcImRlZmF1bHRcIilcclxuICogLSBTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoLCBMaWNlbnNlOiBDQzAgKHJlcXVpcmVkIGJ5IFwiZGVmYXVsdFwiKVxyXG4gKiAtIFN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXMsIExpY2Vuc2U6IENDMCAocmVxdWlyZWQgYnkgXCJkZWZhdWx0XCIpXHJcbiAqIC0gU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoLCBMaWNlbnNlOiBDQzAgKHJlcXVpcmVkIGJ5IFwiZGVmYXVsdFwiKVxyXG4gKiAtIFVSTCwgTGljZW5zZTogQ0MwIChyZXF1aXJlZCBieSBcImRlZmF1bHRcIikgKi9cclxuXHJcblxyXG5cclxuLy8gRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1xyXG5FbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzID0gRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLm9NYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yIHx8IGZ1bmN0aW9uIG1hdGNoZXMoc2VsZWN0b3IpIHtcclxuXHJcblx0dmFyIGVsZW1lbnQgPSB0aGlzO1xyXG5cdHZhciBlbGVtZW50cyA9IChlbGVtZW50LmRvY3VtZW50IHx8IGVsZW1lbnQub3duZXJEb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XHJcblx0dmFyIGluZGV4ID0gMDtcclxuXHJcblx0d2hpbGUgKGVsZW1lbnRzW2luZGV4XSAmJiBlbGVtZW50c1tpbmRleF0gIT09IGVsZW1lbnQpIHtcclxuXHRcdCsraW5kZXg7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gISFlbGVtZW50c1tpbmRleF07XHJcbn07XHJcblxyXG4vLyBFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0XHJcbkVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3QgPSBmdW5jdGlvbiBjbG9zZXN0KHNlbGVjdG9yKSB7XHJcblx0dmFyIG5vZGUgPSB0aGlzO1xyXG5cclxuXHR3aGlsZSAobm9kZSkge1xyXG5cdFx0aWYgKG5vZGUubWF0Y2hlcyhzZWxlY3RvcikpIHJldHVybiBub2RlO1xyXG5cdFx0ZWxzZSBub2RlID0gbm9kZS5wYXJlbnRFbGVtZW50O1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIG51bGw7XHJcbn07XHJcblxyXG5cclxuXHJcbi8qISBAc291cmNlIGh0dHA6Ly9wdXJsLmVsaWdyZXkuY29tL2dpdGh1Yi9jbGFzc0xpc3QuanMvYmxvYi9tYXN0ZXIvY2xhc3NMaXN0LmpzICovXHJcblwiZG9jdW1lbnRcImluIHNlbGYmJihcImNsYXNzTGlzdFwiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIl9cIikmJighZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TfHxcImNsYXNzTGlzdFwiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcImdcIikpfHxmdW5jdGlvbihhKXtpZihcIkVsZW1lbnRcImluIGEpe2E9YS5FbGVtZW50LnByb3RvdHlwZTt2YXIgaD1PYmplY3QsbD1TdHJpbmcucHJvdG90eXBlLnRyaW18fGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX0sbj1BcnJheS5wcm90b3R5cGUuaW5kZXhPZnx8ZnVuY3Rpb24oYyl7Zm9yKHZhciBiPTAsaz10aGlzLmxlbmd0aDtiPGs7YisrKWlmKGIgaW4gdGhpcyYmdGhpc1tiXT09PWMpcmV0dXJuIGI7cmV0dXJuLTF9LGY9ZnVuY3Rpb24oYyxiKXt0aGlzLm5hbWU9Yzt0aGlzLmNvZGU9RE9NRXhjZXB0aW9uW2NdO3RoaXMubWVzc2FnZT1ifSxlPWZ1bmN0aW9uKGMsXHJcbmIpe2lmKFwiXCI9PT1iKXRocm93IG5ldyBmKFwiU1lOVEFYX0VSUlwiLFwiVGhlIHRva2VuIG11c3Qgbm90IGJlIGVtcHR5LlwiKTtpZigvXFxzLy50ZXN0KGIpKXRocm93IG5ldyBmKFwiSU5WQUxJRF9DSEFSQUNURVJfRVJSXCIsXCJUaGUgdG9rZW4gbXVzdCBub3QgY29udGFpbiBzcGFjZSBjaGFyYWN0ZXJzLlwiKTtyZXR1cm4gbi5jYWxsKGMsYil9LGc9ZnVuY3Rpb24oYyl7dmFyIGI9bC5jYWxsKGMuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpO2I9Yj9iLnNwbGl0KC9cXHMrLyk6W107Zm9yKHZhciBrPTAsZT1iLmxlbmd0aDtrPGU7aysrKXRoaXMucHVzaChiW2tdKTt0aGlzLl91cGRhdGVDbGFzc05hbWU9ZnVuY3Rpb24oKXtjLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsdGhpcy50b1N0cmluZygpKX19LGQ9Zy5wcm90b3R5cGU9W10sbT1mdW5jdGlvbigpe3JldHVybiBuZXcgZyh0aGlzKX07Zi5wcm90b3R5cGU9RXJyb3IucHJvdG90eXBlO2QuaXRlbT1mdW5jdGlvbihjKXtyZXR1cm4gdGhpc1tjXXx8XHJcbm51bGx9O2QuY29udGFpbnM9ZnVuY3Rpb24oYyl7cmV0dXJuIX5lKHRoaXMsYytcIlwiKX07ZC5hZGQ9ZnVuY3Rpb24oKXt2YXIgYz1hcmd1bWVudHMsYj0wLGs9Yy5sZW5ndGgsZD0hMTtkb3t2YXIgYT1jW2JdK1wiXCI7fmUodGhpcyxhKSYmKHRoaXMucHVzaChhKSxkPSEwKX13aGlsZSgrK2I8ayk7ZCYmdGhpcy5fdXBkYXRlQ2xhc3NOYW1lKCl9O2QucmVtb3ZlPWZ1bmN0aW9uKCl7dmFyIGM9YXJndW1lbnRzLGI9MCxkPWMubGVuZ3RoLGE9ITEsZjtkb3t2YXIgZz1jW2JdK1wiXCI7Zm9yKGY9ZSh0aGlzLGcpO35mOyl0aGlzLnNwbGljZShmLDEpLGE9ITAsZj1lKHRoaXMsZyl9d2hpbGUoKytiPGQpO2EmJnRoaXMuX3VwZGF0ZUNsYXNzTmFtZSgpfTtkLnRvZ2dsZT1mdW5jdGlvbihjLGIpe3ZhciBhPXRoaXMuY29udGFpbnMoYyksZD1hPyEwIT09YiYmXCJyZW1vdmVcIjohMSE9PWImJlwiYWRkXCI7aWYoZCl0aGlzW2RdKGMpO3JldHVybiEwPT09Ynx8ITE9PT1iP2I6IWF9O2QucmVwbGFjZT1mdW5jdGlvbihjLFxyXG5iKXt2YXIgYT1lKGMrXCJcIik7fmEmJih0aGlzLnNwbGljZShhLDEsYiksdGhpcy5fdXBkYXRlQ2xhc3NOYW1lKCkpfTtkLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuam9pbihcIiBcIil9O2lmKGguZGVmaW5lUHJvcGVydHkpe2Q9e2dldDptLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfTt0cnl7aC5kZWZpbmVQcm9wZXJ0eShhLFwiY2xhc3NMaXN0XCIsZCl9Y2F0Y2goYyl7aWYodm9pZCAwPT09Yy5udW1iZXJ8fC0yMTQ2ODIzMjUyPT09Yy5udW1iZXIpZC5lbnVtZXJhYmxlPSExLGguZGVmaW5lUHJvcGVydHkoYSxcImNsYXNzTGlzdFwiLGQpfX1lbHNlIGgucHJvdG90eXBlLl9fZGVmaW5lR2V0dGVyX18mJmEuX19kZWZpbmVHZXR0ZXJfXyhcImNsYXNzTGlzdFwiLG0pfX0oc2VsZiksZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiX1wiKTthLmNsYXNzTGlzdC5hZGQoXCJjMVwiLFwiYzJcIik7aWYoIWEuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYzJcIikpe3ZhciBoPVxyXG5mdW5jdGlvbihhKXt2YXIgZj1ET01Ub2tlbkxpc3QucHJvdG90eXBlW2FdO0RPTVRva2VuTGlzdC5wcm90b3R5cGVbYV09ZnVuY3Rpb24oYSl7dmFyIGUsZD1hcmd1bWVudHMubGVuZ3RoO2ZvcihlPTA7ZTxkO2UrKylhPWFyZ3VtZW50c1tlXSxmLmNhbGwodGhpcyxhKX19O2goXCJhZGRcIik7aChcInJlbW92ZVwiKX1hLmNsYXNzTGlzdC50b2dnbGUoXCJjM1wiLCExKTtpZihhLmNsYXNzTGlzdC5jb250YWlucyhcImMzXCIpKXt2YXIgbD1ET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZTtET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhLGYpe3JldHVybiAxIGluIGFyZ3VtZW50cyYmIXRoaXMuY29udGFpbnMoYSk9PT0hZj9mOmwuY2FsbCh0aGlzLGEpfX1cInJlcGxhY2VcImluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJfXCIpLmNsYXNzTGlzdHx8KERPTVRva2VuTGlzdC5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihhLGYpe3ZhciBlPXRoaXMudG9TdHJpbmcoKS5zcGxpdChcIiBcIiksXHJcbmc9ZS5pbmRleE9mKGErXCJcIik7fmcmJihlPWUuc2xpY2UoZyksdGhpcy5yZW1vdmUuYXBwbHkodGhpcyxlKSx0aGlzLmFkZChmKSx0aGlzLmFkZC5hcHBseSh0aGlzLGUuc2xpY2UoMSkpKX0pO2E9bnVsbH0oKSk7IiwiLyohIFVURi04XHJcblxyXG7CqSBrb3ZyaWdpblxyXG7QktGB0LUg0L/RgNCw0LLQsCDRgNCw0LfRgNC10YjQtdC90Ytcclxu0LrRgNCw0YHQuNCy0YvQuSDQtNC40LfQsNC50L0g0LTQvtC70LbQtdC9INC40LzQtdGC0Ywg0LrRgNCw0YHQuNCy0YvQuSDQutC+0LTCrlxyXG5cclxuaHR0cHM6Ly9naXRodWIuY29tL2h0bWxwbHVzY3NzL1xyXG5cclxuKi9cclxuXHJcbnZhciBDRiA9IHt9O1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG5cdENGLmJvZHkgPSBkb2N1bWVudC5ib2R5O1xyXG5cdENGLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcblx0Q0YuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG5cclxuXHRDRi50b3VjaERldmljZSA9IFwib250b3VjaHN0YXJ0XCIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG5cclxuLy8gcmVzaXplXHJcblxyXG5cdHZhciByZXNpemVUaW1lb3V0ID0gbnVsbDtcclxuXHJcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZnVuY3Rpb24oKXtcclxuXHJcblx0XHRpZiAoIXJlc2l6ZVRpbWVvdXQpIHtcclxuXHJcblx0XHRcdHJlc2l6ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRyZXNpemVUaW1lb3V0ID0gbnVsbDtcclxuXHRcdFx0XHRDRi53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG5cdFx0XHRcdENGLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHJcblx0XHRcdH0sIDEwMCk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxuXHJcbi8vIGhyZWY9XCJ0ZWw6XCJcclxuXHJcblx0aWYoIUNGLnRvdWNoRGV2aWNlIHx8IENGLndpZHRoID4gMTIwMCkge1xyXG5cclxuXHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2hyZWZePVwidGVsXCJdJyksIGZ1bmN0aW9uIChlbCkge1xyXG5cclxuXHRcdFx0ZWwucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7XHJcblxyXG5cdFx0fSk7XHJcblxyXG5cdH1cclxuXHJcbi8vINGB0LrQu9C+0L3QtdC90LjQtVxyXG5cdENGLmRlY2xlbnNpb24gPSBmdW5jdGlvbihudW0sIGV4cHJlc3Npb25zKSB7XHJcblx0XHR2YXIgcjtcclxuXHRcdHZhciBjb3VudCA9IG51bSAlIDEwMDtcclxuXHRcdGlmIChjb3VudCA+IDQgJiYgY291bnQgPCAyMSlcclxuXHRcdFx0ciA9IGV4cHJlc3Npb25zWycyJ107XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Y291bnQgPSBjb3VudCAlIDEwO1xyXG5cdFx0XHRpZiAoY291bnQgPT0gMSlcclxuXHRcdFx0XHRyID0gZXhwcmVzc2lvbnNbJzAnXTtcclxuXHRcdFx0ZWxzZSBpZiAoY291bnQgPiAxICYmIGNvdW50IDwgNSlcclxuXHRcdFx0XHRyID0gZXhwcmVzc2lvbnNbJzEnXTtcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHIgPSBleHByZXNzaW9uc1snMiddO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHI7XHJcblx0fVxyXG5cclxuLy8g0LfQsNCz0YDRg9C30LrQsCDQutCw0LvRjNC60YPQu9GP0YLQvtGA0LBcclxuXHRpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGN1bGF0b3InKSkge1xyXG5cclxuXHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuXHJcblx0XHRzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xyXG5cdFx0c2NyaXB0LmFzeW5jID0gdHJ1ZTtcclxuXHRcdHNjcmlwdC5zcmMgPSBTSVRFX1RFTVBMQVRFX1BBVEggKyAnL2pzL2NhbGN1bGF0b3IuYWxsLm1pbi5qcyc7XHJcblxyXG5cdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG5cclxuXHR9XHJcblxyXG5cdC8vINC+0LHRgNCw0LHQvtGC0YfQuNC6INCw0L3QuNC80LDRhtC40LlcclxuXHRDRi5jc3NBbmltYXRpb24gPSBmdW5jdGlvbihhKXt2YXIgYixjLGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNzc2FuaW1hdGlvblwiKTtzd2l0Y2goYSl7Y2FzZSdhbmltYXRpb24nOmI9e1wiYW5pbWF0aW9uXCI6XCJhbmltYXRpb25lbmRcIixcIk9BbmltYXRpb25cIjpcIm9BbmltYXRpb25FbmRcIixcIk1vekFuaW1hdGlvblwiOlwiYW5pbWF0aW9uZW5kXCIsXCJXZWJraXRBbmltYXRpb25cIjpcIndlYmtpdEFuaW1hdGlvbkVuZFwifTticmVhaztjYXNlJ3RyYW5zaXRpb24nOmI9e1widHJhbnNpdGlvblwiOlwidHJhbnNpdGlvbmVuZFwiLFwiT1RyYW5zaXRpb25cIjpcIm9UcmFuc2l0aW9uRW5kXCIsXCJNb3pUcmFuc2l0aW9uXCI6XCJ0cmFuc2l0aW9uZW5kXCIsXCJXZWJraXRUcmFuc2l0aW9uXCI6XCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCJ9fWZvcihjIGluIGIpaWYoZC5zdHlsZVtjXSE9PXVuZGVmaW5lZClyZXR1cm4gYltjXX1cclxuXHJcblx0Ly8gRGV0ZXJtaW5lIGlmIGFuIGVsZW1lbnQgaXMgaW4gdGhlIHZpc2libGUgdmlld3BvcnRcclxuXHRDRi5pc0luVmlld3BvcnQgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcblx0XHR2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHRyZXR1cm4gKHJlY3QudG9wID49IDAgJiYgcmVjdC5ib3R0b20gPD0gQ0YuaGVpZ2h0KTtcclxuXHR9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbihjb29raWUpe1xyXG5cclxuLy9cdENvb2tpZXMuc2V0KCdCSVRSSVhfU01faW5mb0Nvb2tpZScsICdjbG9zZScpO1xyXG5cclxuXHJcbn0pKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb29raWUnKSk7IiwiKGZ1bmN0aW9uKCl7XHJcblxyXG5cdGZ1bmN0aW9uIGFkZExpbmsoKSB7XHJcblxyXG5cdFx0dmFyIGJvZHlfZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07XHJcblx0XHR2YXIgc2VsZWN0aW9uID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7XHJcblx0XHR2YXIgcGFnZWxpbmsgPSBcIjxwPtCY0YHRgtC+0YfQvdC40Lo6IDxhIGhyZWY9J1wiK2xvY2F0aW9uLmhyZWYrXCInPlwiK2xvY2F0aW9uLmhyZWYrXCI8L2E+PC9wPlwiO1xyXG5cdFx0dmFyIGNvcHl0ZXh0ID0gc2VsZWN0aW9uICsgcGFnZWxpbms7XHJcblx0XHR2YXIgbmV3ZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG5cdFx0Ym9keV9lbGVtZW50LmFwcGVuZENoaWxkKG5ld2Rpdik7XHJcblx0XHRuZXdkaXYuaW5uZXJIVE1MID0gY29weXRleHQ7XHJcblx0XHRzZWxlY3Rpb24uc2VsZWN0QWxsQ2hpbGRyZW4obmV3ZGl2KTtcclxuXHJcblx0XHR3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cclxuXHRcdFx0Ym9keV9lbGVtZW50LnJlbW92ZUNoaWxkKG5ld2Rpdik7XHJcblxyXG5cdFx0fSwwKTtcclxuXHJcblx0fVxyXG5cclxuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZScpICYmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZScpLm9uY29weSA9IGFkZExpbmspO1xyXG5cclxufSkoKTsiLCJcclxuXHJcbihmdW5jdGlvbigpe1xyXG5cclxuXHR2YXIgZm9ybXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybScpO1xyXG5cclxuXHRBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGZvcm1zLCBmdW5jdGlvbihmb3JtKXtcclxuXHJcblx0XHR2YXIgbm92YWxpZGF0ZSA9IGZhbHNlLFxyXG5cdFx0XHRzaG93TW9hZGFsT2sgPSBmb3JtLmdldEF0dHJpYnV0ZSgnZGF0YS1vaycpLFxyXG5cdFx0XHRmb3JtUmVxdWlyZWQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyZXF1aXJlZF0nKSxcclxuXHRcdFx0Zm9ybUJ0blN1Ym1pdCA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmZvcm1fX3N1Ym1pdCcpO1xyXG5cclxuXHRcdC8vINC+0YLQv9GA0LDQstC60LAg0YTQvtGA0LzRi1xyXG5cdFx0Zm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbihlKSB7XHJcblxyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHR2YXIgbm92YWxpZGF0ZSA9IGZhbHNlLFxyXG5cdFx0XHRcdGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pO1xyXG5cclxuXHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChmb3JtUmVxdWlyZWQsIGZ1bmN0aW9uKGlucHV0KXtcclxuXHJcblx0XHRcdFx0aWYoaW5wdXQuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT0gJ2NoZWNrYm94Jykge1xyXG5cclxuXHRcdFx0XHRcdGlmKGlucHV0LmNoZWNrZWQpe1xyXG5cclxuXHRcdFx0XHRcdFx0aW5wdXQucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2JveC0tZXJyb3InKTtcclxuXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIHtcclxuXHJcblx0XHRcdFx0XHRcdGlucHV0LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnY2hlY2tib3gtLWVycm9yJyk7XHJcblx0XHRcdFx0XHRcdG5vdmFsaWRhdGUgPSB0cnVlO1xyXG5cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRlbHNlIHtcclxuXHJcblx0XHRcdFx0XHRpZihpbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoJ2lucHV0LWxhYmVsX19pbnB1dCcpKXtcclxuXHJcblx0XHRcdFx0XHRcdGVycm9ySW5wdXRMYWJlbChpbnB1dCk7XHJcblxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmKCFpbnB1dC52YWx1ZSl7XHJcblxyXG5cdFx0XHRcdFx0XHRub3ZhbGlkYXRlID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH0pO1xyXG5cclxuXHJcblx0XHRcdGlmKCFub3ZhbGlkYXRlKXtcclxuXHJcblx0XHRcdFx0dmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuXHRcdFx0XHR4aHIub3BlbihcIlBPU1RcIiwgZm9ybS5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpKTtcclxuXHRcdFx0XHR4aHIuc2VuZChmb3JtRGF0YSk7XHJcblxyXG5cdFx0XHRcdC8vIHJlc2V0XHJcblxyXG5cdFx0XHRcdGZvcm1CdG5TdWJtaXQgJiYgZm9ybUJ0blN1Ym1pdC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywnZGlzYWJsZWQnKTtcclxuXHJcblx0XHRcdFx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRcdGlmICh4aHIucmVhZHlTdGF0ZSAhPSA0KXtcclxuXHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKHhoci5zdGF0dXMgPT0gMjAwKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRmb3JtLnJlc2V0KCk7XHJcblxyXG5cdFx0XHRcdFx0XHRBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGlucHV0TGFiZWwsIGZ1bmN0aW9uKGVsKXtcclxuXHJcblx0XHRcdFx0XHRcdFx0Zm9jdXNJbnB1dExhYmVsKGVsKTtcclxuXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYoc2hvd01vYWRhbE9rKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRcdENGLm1vZGFsU2hvdygnb2snLHNob3dNb2FkYWxPay5zcGxpdCgnfCcpWzBdLHNob3dNb2FkYWxPay5zcGxpdCgnfCcpWzFdKTtcclxuXHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRcdFx0YWxlcnQoJ9C+0YjQuNCx0LrQsCAnICsgeGhyLnN0YXR1cyk7XHJcblxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGZvcm1CdG5TdWJtaXQgJiYgZm9ybUJ0blN1Ym1pdC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSk7XHJcblxyXG5cclxuLy8gaW5wdXQtbGFiZWxcclxuXHJcblx0dmFyIGlucHV0TGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXQtbGFiZWxfX2lucHV0Jyk7XHJcblxyXG5cdGZ1bmN0aW9uIGZvY3VzSW5wdXRMYWJlbChlbCxyZXF1aXJlZCl7XHJcblxyXG5cdFx0ZWwudmFsdWUgP1xyXG5cdFx0XHRlbC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2lucHV0LWxhYmVsLS1uby1lbXB0eScpOlxyXG5cdFx0XHRlbC5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2lucHV0LWxhYmVsLS1uby1lbXB0eScpO1xyXG5cclxuXHRcdGlmKHJlcXVpcmVkICYmIGVsLmdldEF0dHJpYnV0ZSgncmVxdWlyZWQnKSAhPT0gbnVsbCkge1xyXG5cclxuXHRcdFx0ZXJyb3JJbnB1dExhYmVsKGVsKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZXJyb3JJbnB1dExhYmVsKGVsKXtcclxuXHJcblx0XHRlbC52YWx1ZSA/XHJcblx0XHRcdGVsLnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnaW5wdXQtbGFiZWwtLWVycm9yJyk6XHJcblx0XHRcdGVsLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnaW5wdXQtbGFiZWwtLWVycm9yJyk7XHJcblxyXG5cdH1cclxuXHJcblx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChpbnB1dExhYmVsLCBmdW5jdGlvbihlbCl7XHJcblxyXG5cdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdGZvY3VzSW5wdXRMYWJlbChlbCk7XHJcblxyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdGZvY3VzSW5wdXRMYWJlbChlbCx0cnVlKTtcclxuXHJcblx0XHR9KTtcclxuXHJcblx0XHRlbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRmb2N1c0lucHV0TGFiZWwoZWwsdHJ1ZSk7XHJcblxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Zm9jdXNJbnB1dExhYmVsKGVsKTtcclxuXHJcblx0fSk7XHJcblxyXG4vLyBjaGVja2VkXHJcblxyXG5cdHZhciBjaGVja2JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGVja2JveCcpO1xyXG5cclxuXHRBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNoZWNrYm94LCBmdW5jdGlvbihlbCl7XHJcblxyXG5cdFx0dmFyIGlucHV0ID0gZWwucXVlcnlTZWxlY3RvcignaW5wdXQnKTtcclxuXHJcblx0XHRpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdGlmKGlucHV0LmNoZWNrZWQpIHtcclxuXHJcblx0XHRcdFx0ZWwuY2xhc3NMaXN0LnJlbW92ZSgnY2hlY2tib3gtLWVycm9yJyk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fSk7XHJcblxyXG5cdH0pO1xyXG5cclxufSkoKTsiLCJcclxuXHJcbihmdW5jdGlvbihnZW8pe1xyXG5cclxuXHRpZihnZW8pIHtcclxuXHJcblx0XHR2YXIgYnRuVHJ1ZSA9IGdlby5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19nZW8tY29uZmlybS10cnVlJyksXHJcblx0XHRcdGNvbmZpcm1XaW5kb3cgPSBnZW8ucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fZ2VvLWNvbmZpcm0nKTtcclxuXHJcblx0XHRidG5UcnVlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGNpdHkgPSBnZW8ucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fZ2VvLWNvbmZpcm0tbmFtZScpLFxyXG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGdlby5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19nZW8tY3VycmVudCcpO1xyXG5cclxuICAgICAgICAgICAgY3VycmVudC50ZXh0Q29udGVudCA9IGNpdHkudGV4dENvbnRlbnQ7XHJcblxyXG5cdFx0XHRjb25maXJtV2luZG93LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcclxuXHJcbiAgICAgICAgICAgIENvb2tpZXMuc2V0KCdCSVRSSVhfU01fR0VPX0FDQ0VQVCcsIDEsIHtkb21haW46IGxvY2F0aW9uLmhvc3RuYW1lfSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRpZighQ29va2llcy5nZXQoJ0JJVFJJWF9TTV9HRU9fQUNDRVBUJykgfHwgQ29va2llcy5nZXQoJ0JJVFJJWF9TTV9HRU9fQUNDRVBUJykgPT09ICcwJykge1xyXG5cclxuXHRcdFx0Y29uZmlybVdpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9XHJcblxyXG59KShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19nZW8nKSk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcblx0dmFyIHlhQ291bnRlcklkID0gJzUxMTIzNjQ0JyxcclxuXHRcdGdvYWxzID0gW1xyXG5cdFx0XHQvLyBob21lXHJcblx0XHRcdHtcclxuXHRcdFx0XHRza2lwUGFnZXM6IFsnL2xvYW5zL2Vhc2UvJywgJy9sb2Fucy9zZWN1cmVkLycsICcvbG9hbnMvd2F5cy8nXSxcclxuXHRcdFx0XHRzZWxlY3RvcjogJy5jYWxsYmFjaycsXHJcblx0XHRcdFx0ZXZlbnQ6ICdzdWJtaXQnLFxyXG5cdFx0XHRcdHlhbmRleDoge1xyXG5cdFx0XHRcdFx0dGFyZ2V0OiAnQ2FsbGJhY2tNYWluJ1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0Z29vZ2xlOiB7XHJcblx0XHRcdFx0XHRjYXRlZ29yeTogJ0NhbGxiYWNrJyxcclxuXHRcdFx0XHRcdGFjdGlvbjogJ3N1Ym1pdCcsXHJcblx0XHRcdFx0XHRsYWJlbDogJ01haW4nXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cGFnZTogJy8nLFxyXG5cdFx0XHRcdHNlbGVjdG9yOiAnLmNvbnN1bHRhdGlvbicsXHJcblx0XHRcdFx0ZXZlbnQ6ICdzdWJtaXQnLFxyXG5cdFx0XHRcdHlhbmRleDoge1xyXG5cdFx0XHRcdFx0dGFyZ2V0OiAnQ29uc3VsdGF0aW9uTWFpbidcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGdvb2dsZToge1xyXG5cdFx0XHRcdFx0Y2F0ZWdvcnk6ICdGb3JtJyxcclxuXHRcdFx0XHRcdGFjdGlvbjogJ3N1Ym1pdCcsXHJcblx0XHRcdFx0XHRsYWJlbDogJ0NvbnN1bHRhdGlvbk1haW4nXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cGFnZTogJy8nLFxyXG5cdFx0XHRcdHNlbGVjdG9yOiAnLnByb21vX19pdGVtLS1sb2FuIC5idG4nLFxyXG5cdFx0XHRcdGV2ZW50OiAnY2xpY2snLFxyXG5cdFx0XHRcdHlhbmRleDoge1xyXG5cdFx0XHRcdFx0dGFyZ2V0OiAnRGV0YWlsWmF5bSdcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGdvb2dsZToge1xyXG5cdFx0XHRcdFx0Y2F0ZWdvcnk6ICdCdXR0b24nLFxyXG5cdFx0XHRcdFx0YWN0aW9uOiAnY2xpY2snLFxyXG5cdFx0XHRcdFx0bGFiZWw6ICdEZXRhaWxaYXltJ1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHBhZ2U6ICcvJyxcclxuXHRcdFx0XHRzZWxlY3RvcjogJy5wcm9tb19faXRlbS0tYXV0byAuYnRuJyxcclxuXHRcdFx0XHRldmVudDogJ2NsaWNrJyxcclxuXHRcdFx0XHR5YW5kZXg6IHtcclxuXHRcdFx0XHRcdHRhcmdldDogJ0RldGFpbEF1dG8nXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRnb29nbGU6IHtcclxuXHRcdFx0XHRcdGNhdGVnb3J5OiAnQnV0dG9uJyxcclxuXHRcdFx0XHRcdGFjdGlvbjogJ2NsaWNrJyxcclxuXHRcdFx0XHRcdGxhYmVsOiAnRGV0YWlsQXV0bydcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9LFxyXG5cdFx0XHQvLyBsb2FuIChlYXNlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cGFnZTogJy9sb2Fucy9lYXNlLycsXHJcblx0XHRcdFx0c2VsZWN0b3I6ICcuY2FsbGJhY2snLFxyXG5cdFx0XHRcdGV2ZW50OiAnc3VibWl0JyxcclxuXHRcdFx0XHR5YW5kZXg6IHtcclxuXHRcdFx0XHRcdHRhcmdldDogJ1pheW1DYWxsYmFjaydcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGdvb2dsZToge1xyXG5cdFx0XHRcdFx0Y2F0ZWdvcnk6ICdDYWxsYmFjaycsXHJcblx0XHRcdFx0XHRhY3Rpb246ICdzdWJtaXQnLFxyXG5cdFx0XHRcdFx0bGFiZWw6ICdaYXltJ1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRwYWdlOiAnL2xvYW5zL2Vhc2UvJyxcclxuXHRcdFx0XHRzZWxlY3RvcjogJy5jb25zdWx0YXRpb24nLFxyXG5cdFx0XHRcdGV2ZW50OiAnc3VibWl0JyxcclxuXHRcdFx0XHR5YW5kZXg6IHtcclxuXHRcdFx0XHRcdHRhcmdldDogJ0NvbnN1bHRhdGlvblpheW0nXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRnb29nbGU6IHtcclxuXHRcdFx0XHRcdGNhdGVnb3J5OiAnRm9ybScsXHJcblx0XHRcdFx0XHRhY3Rpb246ICdzdWJtaXQnLFxyXG5cdFx0XHRcdFx0bGFiZWw6ICdDb25zdWx0YXRpb25aYXltJ1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRwYWdlOiAnL2xvYW5zL2Vhc2UvJyxcclxuXHRcdFx0XHRzZWxlY3RvcjogJy5jYWxjdWxhdG9yX19mb3JtJyxcclxuXHRcdFx0XHRldmVudDogJ3N1Ym1pdCcsXHJcblx0XHRcdFx0eWFuZGV4OiB7XHJcblx0XHRcdFx0XHR0YXJnZXQ6ICdaYXltRm9ybSdcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGdvb2dsZToge1xyXG5cdFx0XHRcdFx0Y2F0ZWdvcnk6ICdGb3JtJyxcclxuXHRcdFx0XHRcdGFjdGlvbjogJ3N1Ym1pdCcsXHJcblx0XHRcdFx0XHRsYWJlbDogJ1pheW0nXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly8gbG9hbiAoYXV0bylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHBhZ2U6ICcvbG9hbnMvc2VjdXJlZC8nLFxyXG5cdFx0XHRcdHNlbGVjdG9yOiAnLmNhbGxiYWNrJyxcclxuXHRcdFx0XHRldmVudDogJ3N1Ym1pdCcsXHJcblx0XHRcdFx0eWFuZGV4OiB7XHJcblx0XHRcdFx0XHR0YXJnZXQ6ICdBdXRvQ2FsbGJhY2snXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRnb29nbGU6IHtcclxuXHRcdFx0XHRcdGNhdGVnb3J5OiAnQ2FsbGJhY2snLFxyXG5cdFx0XHRcdFx0YWN0aW9uOiAnc3VibWl0JyxcclxuXHRcdFx0XHRcdGxhYmVsOiAnQXV0bydcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRwYWdlOiAnL2xvYW5zL3NlY3VyZWQvJyxcclxuXHRcdFx0XHRzZWxlY3RvcjogJy5jb25zdWx0YXRpb24nLFxyXG5cdFx0XHRcdGV2ZW50OiAnc3VibWl0JyxcclxuXHRcdFx0XHR5YW5kZXg6IHtcclxuXHRcdFx0XHRcdHRhcmdldDogJ0NvbnN1bHRhdGlvbkF1dG8nXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRnb29nbGU6IHtcclxuXHRcdFx0XHRcdGNhdGVnb3J5OiAnRm9ybScsXHJcblx0XHRcdFx0XHRhY3Rpb246ICdzdWJtaXQnLFxyXG5cdFx0XHRcdFx0bGFiZWw6ICdDb25zdWx0YXRpb25BdXRvJ1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRwYWdlOiAnL2xvYW5zL3NlY3VyZWQvJyxcclxuXHRcdFx0XHRzZWxlY3RvcjogJy5jYWxjdWxhdG9yX19mb3JtJyxcclxuXHRcdFx0XHRldmVudDogJ3N1Ym1pdCcsXHJcblx0XHRcdFx0eWFuZGV4OiB7XHJcblx0XHRcdFx0XHR0YXJnZXQ6ICdBdXRvRm9ybSdcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGdvb2dsZToge1xyXG5cdFx0XHRcdFx0Y2F0ZWdvcnk6ICdGb3JtJyxcclxuXHRcdFx0XHRcdGFjdGlvbjogJ3N1Ym1pdCcsXHJcblx0XHRcdFx0XHRsYWJlbDogJ0F1dG8nXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vIHdheXNcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHBhZ2U6ICcvbG9hbnMvd2F5cy8nLFxyXG5cdFx0XHRcdHNlbGVjdG9yOiAnLmNhbGxiYWNrJyxcclxuXHRcdFx0XHRldmVudDogJ3N1Ym1pdCcsXHJcblx0XHRcdFx0eWFuZGV4OiB7XHJcblx0XHRcdFx0XHR0YXJnZXQ6ICdIb3dDYWxsYmFjaydcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGdvb2dsZToge1xyXG5cdFx0XHRcdFx0Y2F0ZWdvcnk6ICdDYWxsYmFjaycsXHJcblx0XHRcdFx0XHRhY3Rpb246ICdzdWJtaXQnLFxyXG5cdFx0XHRcdFx0bGFiZWw6ICdIb3cnXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cGFnZTogJy9sb2Fucy93YXlzLycsXHJcblx0XHRcdFx0c2VsZWN0b3I6ICcud2F5c19faXRlbTpmaXJzdC1jaGlsZCAuYnRuJyxcclxuXHRcdFx0XHRldmVudDogJ2NsaWNrJyxcclxuXHRcdFx0XHR5YW5kZXg6IHtcclxuXHRcdFx0XHRcdHRhcmdldDogJ0hvd0Zvcm0nXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRnb29nbGU6IHtcclxuXHRcdFx0XHRcdGNhdGVnb3J5OiAnRm9ybScsXHJcblx0XHRcdFx0XHRhY3Rpb246ICdzdWJtaXQnLFxyXG5cdFx0XHRcdFx0bGFiZWw6ICdIb3cnXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly8g0J/QvtC70YPRh9C10L3QuNC1INC00LXQvdC10LNcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHBhZ2U6ICcvbG9hbnMvc2VjdXJlZC9yZWNlaXZlZC8nLFxyXG5cdFx0XHRcdHNlbGVjdG9yOiAnLmNhbGxiYWNrJyxcclxuXHRcdFx0XHRldmVudDogJ3N1Ym1pdCcsXHJcblx0XHRcdFx0eWFuZGV4OiB7XHJcblx0XHRcdFx0XHR0YXJnZXQ6ICdHZXRDYWxsYmFjaydcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGdvb2dsZToge1xyXG5cdFx0XHRcdFx0Y2F0ZWdvcnk6ICdDYWxsYmFjaycsXHJcblx0XHRcdFx0XHRhY3Rpb246ICdzdWJtaXQnLFxyXG5cdFx0XHRcdFx0bGFiZWw6ICdHZXQnXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cGFnZTogJy9sb2Fucy9zZWN1cmVkL3JlY2VpdmVkLycsXHJcblx0XHRcdFx0c2VsZWN0b3I6ICcuY2FsY3VsYXRvcl9fZm9ybScsXHJcblx0XHRcdFx0ZXZlbnQ6ICdzdWJtaXQnLFxyXG5cdFx0XHRcdHlhbmRleDoge1xyXG5cdFx0XHRcdFx0dGFyZ2V0OiAnR2V0Rm9ybSdcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGdvb2dsZToge1xyXG5cdFx0XHRcdFx0Y2F0ZWdvcnk6ICdGb3JtJyxcclxuXHRcdFx0XHRcdGFjdGlvbjogJ3N1Ym1pdCcsXHJcblx0XHRcdFx0XHRsYWJlbDogJ0dldCdcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvLyDQodC/0L7RgdC+0LHRiyDQv9C+0LPQsNGI0LXQvdC40Y9cclxuXHRcdFx0e1xyXG5cdFx0XHRcdHBhZ2U6ICcvbG9hbnMvcmVwYXkvJyxcclxuXHRcdFx0XHRzZWxlY3RvcjogJy5yZXBheV9faXRlbS0tZWxlY3NuZXQgLmJ0bicsXHJcblx0XHRcdFx0ZXZlbnQ6ICdjbGljaycsXHJcblx0XHRcdFx0eWFuZGV4OiB7XHJcblx0XHRcdFx0XHR0YXJnZXQ6ICdFbGVjc25ldCdcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGdvb2dsZToge1xyXG5cdFx0XHRcdFx0Y2F0ZWdvcnk6ICdCdXR0b24nLFxyXG5cdFx0XHRcdFx0YWN0aW9uOiAnY2xpY2snLFxyXG5cdFx0XHRcdFx0bGFiZWw6ICdFbGVjc25ldCdcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRwYWdlOiAnL2xvYW5zL3JlcGF5LycsXHJcblx0XHRcdFx0c2VsZWN0b3I6ICcucmVwYXlfX2l0ZW0tLXRyYW5zZmVyIC5idG4nLFxyXG5cdFx0XHRcdGV2ZW50OiAnY2xpY2snLFxyXG5cdFx0XHRcdHlhbmRleDoge1xyXG5cdFx0XHRcdFx0dGFyZ2V0OiAnVHJhbnNmZXInXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRnb29nbGU6IHtcclxuXHRcdFx0XHRcdGNhdGVnb3J5OiAnQnV0dG9uJyxcclxuXHRcdFx0XHRcdGFjdGlvbjogJ2NsaWNrJyxcclxuXHRcdFx0XHRcdGxhYmVsOiAnVHJhbnNmZXInXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cGFnZTogJy9sb2Fucy9yZXBheS8nLFxyXG5cdFx0XHRcdHNlbGVjdG9yOiAnLnJlcGF5X19pdGVtLS1iYW5rIC5idG4nLFxyXG5cdFx0XHRcdGV2ZW50OiAnY2xpY2snLFxyXG5cdFx0XHRcdHlhbmRleDoge1xyXG5cdFx0XHRcdFx0dGFyZ2V0OiAnQmFuaydcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGdvb2dsZToge1xyXG5cdFx0XHRcdFx0Y2F0ZWdvcnk6ICdCdXR0b24nLFxyXG5cdFx0XHRcdFx0YWN0aW9uOiAnY2xpY2snLFxyXG5cdFx0XHRcdFx0bGFiZWw6ICdCYW5rJ1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdF07XHJcblxyXG5cdGdvYWxzLmZvckVhY2goZnVuY3Rpb24gKGdvYWwpIHtcclxuXHRcdGlmIChnb2FsLnBhZ2UgJiYgZ29hbC5wYWdlICE9PSBsb2NhdGlvbi5wYXRobmFtZSlcclxuXHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdGlmIChnb2FsLnNraXBQYWdlcyAmJiBnb2FsLnNraXBQYWdlcy5pbmRleE9mKGxvY2F0aW9uLnBhdGhuYW1lKSAhPT0gLTEpXHJcblx0XHRcdHJldHVybjtcclxuXHJcblx0XHR2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGdvYWwuc2VsZWN0b3IpO1xyXG5cclxuXHRcdFtdLmZvckVhY2guY2FsbChlbGVtZW50cywgZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuXHRcdFx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGdvYWwuZXZlbnQsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRpZiAoZ29hbC55YW5kZXggJiYgd2luZG93Wyd5YUNvdW50ZXInICsgeWFDb3VudGVySWRdKSB7XHJcblx0XHRcdFx0XHR3aW5kb3dbJ3lhQ291bnRlcicgKyB5YUNvdW50ZXJJZF0ucmVhY2hHb2FsKGdvYWwueWFuZGV4LnRhcmdldCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoZ29hbC5nb29nbGUgJiYgd2luZG93Lmd0YWcpIHtcclxuXHRcdFx0XHRcdGd0YWcoJ2V2ZW50JywgZ29hbC5nb29nbGUuYWN0aW9uLCB7XHJcblx0XHRcdFx0XHRcdGV2ZW50X2NhdGVnb3J5OiBnb2FsLmdvb2dsZS5jYXRlZ29yeSxcclxuXHRcdFx0XHRcdFx0ZXZlbnRfbGFiZWw6IGdvYWwuZ29vZ2xlLmxhYmVsXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgU2VhcmNoID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lcilcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLmFjdGlvbiA9IHRoaXMuY29udGFpbmVyLmdldEF0dHJpYnV0ZSgnYWN0aW9uJyk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5wdXQgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19zZWFyY2gtaW5wdXQnKTtcclxuICAgICAgICB0aGlzLmJ0biA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX3NlYXJjaC1idG4nKTtcclxuICAgICAgICB0aGlzLnJlc3VsdCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX3NlYXJjaC1yZXN1bHQnKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFNlYXJjaC5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgb2xkVmFsdWU6ICcnLFxyXG4gICAgICAgIHJ1bjogZmFsc2UsXHJcbiAgICAgICAgbWluUXVlcnlMZW46IDIsXHJcbiAgICAgICAgY2FjaGU6IFtdLFxyXG5cclxuICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMub2xkVmFsdWUgPSB0aGlzLmlucHV0LnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGF0Lm9wZW4oKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCcuaGVhZGVyX19zZWFyY2gnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhhdC5yZXN1bHQuaW5uZXJIVE1MLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zaG93UmVzdWx0KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRpbWVvdXQgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpbWVvdXQpXHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGF0LmlucHV0LnZhbHVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuaGlkZVJlc3VsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zZWFyY2godGhhdC5pbnB1dC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBvcGVuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9fc2VhcmNoLS1zaG93Jyk7XHJcblxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmKHRoYXQuY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnaGVhZGVyX19zZWFyY2gtLXNob3cnKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5pbnB1dC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdib2R5LS1iZycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNsb3NlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGVhZGVyX19zZWFyY2gtLXNob3cnKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdib2R5LS1iZycpO1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVSZXN1bHQoKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzaG93UmVzdWx0OiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdWx0LmlubmVySFRNTCA9IHJlc3VsdCB8fCAnJztcclxuICAgICAgICAgICAgdGhpcy5yZXN1bHQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGhpZGVSZXN1bHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXN1bHQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdWx0LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5ydW4pXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMub2xkVmFsdWUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoIDw9IHRoaXMubWluUXVlcnlMZW4pXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pbnB1dC52YWx1ZSBpbiB0aGlzLmNhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dSZXN1bHQodGhpcy5jYWNoZVt0aGlzLmlucHV0LnZhbHVlXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJ1biA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkUmVzdWx0cyh0aGlzLmlucHV0LnZhbHVlKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmNhY2hlW3RoYXQuaW5wdXQudmFsdWVdID0gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2hvd1Jlc3VsdChyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQucnVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGxvYWRSZXN1bHRzOiBmdW5jdGlvbiAoc2VhcmNoKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGZvcm1hdFBhcmFtcyhwYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3RcclxuICAgICAgICAgICAgICAgICAgICAua2V5cyhwYXJhbXMpXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuam9pbignJicpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHRoYXQuYWN0aW9uICsgJz8nICsgZm9ybWF0UGFyYW1zKHtcclxuICAgICAgICAgICAgICAgICAgICAnYWpheF9jYWxsJzogJ3knLFxyXG4gICAgICAgICAgICAgICAgICAgICdJTlBVVF9JRCc6IHRoYXQuaW5wdXQuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3EnOiBzZWFyY2gsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2wnOiB0aGF0Lm1pblF1ZXJ5TGVuXHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIG5ldyBTZWFyY2goJy5oZWFkZXJfX3NlYXJjaCcpO1xyXG59KSgpOyIsIkNGLmxvYWRNYXAgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgIGlmICh0eXBlb2YgeW1hcHMgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG5cclxuICAgICAgICBzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xyXG4gICAgICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XHJcbiAgICAgICAgc2NyaXB0LnNyYyA9ICdodHRwczovL2FwaS1tYXBzLnlhbmRleC5ydS8yLjEvP2xhbmc9cnVfUlUnO1xyXG5cclxuICAgICAgICBzY3JpcHQub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB5bWFwcy5yZWFkeShjYWxsYmFjayk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB5bWFwcy5yZWFkeShjYWxsYmFjayk7XHJcbiAgICB9XHJcbn07IiwiXG4oZnVuY3Rpb24oZWxlbXMpe1xuXG5cdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZWxlbXMsIGZ1bmN0aW9uIChlbCkge1xuXG5cdFx0dmFyIGJ0biA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5tYXAtdG9nZ2xlX19idG4nKSxcblx0XHRcdGJveCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5tYXAtdG9nZ2xlX19ib3gnKTtcblxuXHRcdGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0aWYoYm94LmNsaWVudEhlaWdodCA+IDApIHtcblxuXHRcdFx0XHRib3guc3R5bGUuaGVpZ2h0ID0gYm94LmNsaWVudEhlaWdodCArICdweCc7XG5cblx0XHRcdH1cblxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xuXG5cdFx0XHRcdGVsLmNsYXNzTGlzdC50b2dnbGUoJ21hcC10b2dnbGUtLWhpZGUnKTtcblxuXHRcdFx0fSwxMDApO1xuXG5cdFx0fSk7XG5cblx0fSk7XG5cbn0pKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYXAtdG9nZ2xlJykpOyIsIkNGLm1hc2sgPSBmdW5jdGlvbihlbGVtcyl7XHJcblxyXG5cdGlmKCFlbGVtcy5sZW5ndGgpIHtcclxuXHJcblx0XHRyZXR1cm47XHJcblxyXG5cdH1cclxuXHJcblx0aWYgKHR5cGVvZiBJbnB1dG1hc2sgPT09ICd1bmRlZmluZWQnKSB7XHJcblxyXG5cdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG5cclxuXHRcdHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XHJcblx0XHRzY3JpcHQuYXN5bmMgPSB0cnVlO1xyXG5cdFx0c2NyaXB0LnNyYyA9IFNJVEVfVEVNUExBVEVfUEFUSCArICcvanMvaW5wdXRtYXNrLmFsbC5taW4uanMnO1xyXG5cclxuXHRcdHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRJbnB1dG1hc2suZXh0ZW5kRGVmYXVsdHMoe1xyXG5cdFx0XHRcdG9uY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdC8qY29uc29sZS5sb2coJ2NvbXBsZXRlJyk7Ki9cclxuXHRcdFx0XHRcdHRoaXMuY2xhc3NMaXN0LmFkZCgnaW5wdXRtYXNrLS1jb21wbGV0ZScpO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0b25pbmNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHQvKmNvbnNvbGUubG9nKCdpbmNvbXBsZXRlJyk7Ki9cclxuXHRcdFx0XHRcdHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnaW5wdXRtYXNrLS1jb21wbGV0ZScpO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0b25jbGVhcmVkOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHQvKmNvbnNvbGUubG9nKCdjbGVhcmVkJyk7Ki9cclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdG9uS2V5VmFsaWRhdGlvbjogZnVuY3Rpb24oa2V5LCByZXN1bHQpe1xyXG5cdFx0XHRcdFx0Lypjb25zb2xlLmxvZyhrZXksIHJlc3VsdCk7Ki9cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0c2V0TWFzaygpO1xyXG5cclxuXHRcdH07XHJcblxyXG5cdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cclxuXHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG5cclxuXHRcdH0sIDUwMDApO1xyXG5cclxuXHR9IGVsc2Uge1xyXG5cclxuXHRcdHNldE1hc2soKTtcclxuXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBzZXRNYXNrKCkge1xyXG5cclxuXHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZWxlbXMsIGZ1bmN0aW9uKGVsKXtcclxuXHJcblx0XHRcdGlmKGVsLmNsYXNzTGlzdC5jb250YWlucygnaW5wdXRtYXNrLS1waG9uZScpKSB7XHJcblxyXG5cdFx0XHRcdHZhciBtYXNrSW5wdXQgPSBuZXcgSW5wdXRtYXNrKHtcclxuXHRcdFx0XHRcdG1hc2s6IFwiKzcgKDk5OSkgOTk5LTk5LTk5XCIsXHJcblx0XHRcdFx0XHRzaG93TWFza09uSG92ZXI6IGZhbHNlLFxyXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6IFwiKzcgKF9fXykgX19fLV9fLV9fXCJcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZihlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2lucHV0bWFzay0tZGF0ZScpKSB7XHJcblxyXG5cdFx0XHRcdHZhciBtYXNrSW5wdXQgPSBuZXcgSW5wdXRtYXNrKHtcclxuXHRcdFx0XHRcdGFsaWFzOiBcImRhdGV0aW1lXCIsXHJcblx0XHRcdFx0XHRzaG93TWFza09uSG92ZXI6IGZhbHNlLFxyXG5cdFx0XHRcdFx0aW5wdXRGb3JtYXQ6IFwiZGQubW0ueXl5eVwiLFxyXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6IFwi0LTQtC7QvNC8LtCz0LPQs9CzXCJcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZihlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2lucHV0bWFzay0tY3VycmVuY3knKSkge1xyXG5cclxuXHRcdFx0XHR2YXIgbWFza0lucHV0ID0gbmV3IElucHV0bWFzayh7XHJcblx0XHRcdFx0XHRhbGlhczogXCJpbnRlZ2VyXCIsXHJcblx0XHRcdFx0XHRzdWZmaXg6ICcg0YDRg9Cx0LvQtdC5JyxcclxuXHRcdFx0XHRcdGdyb3VwU2l6ZTogMyxcclxuXHRcdFx0XHRcdGF1dG9Hcm91cDogdHJ1ZSxcclxuXHRcdFx0XHRcdGdyb3VwU2VwYXJhdG9yOiAnICcsXHJcblx0XHRcdFx0XHRyaWdodEFsaWduOiBmYWxzZVxyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHJcblx0XHRcdFx0dmFyIG1hc2tJbnB1dCA9IG5ldyBJbnB1dG1hc2soZWwuZ2V0QXR0cmlidXRlKCdkYXRhLW1hc2snKSk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRtYXNrSW5wdXQubWFzayhlbCk7XHJcblxyXG5cdFx0fSk7XHJcblxyXG5cdH1cclxuXHJcbn07XHJcblxyXG5DRi5tYXNrKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dG1hc2snKSk7IiwiLy8gYnRuIGFsbCBtZW51XHJcblxyXG5DRi52aWRlb1RvZ2dsZSA9IGZ1bmN0aW9uKG1ldG9kKXtcclxuXHJcblx0dmFyIHZpZGVvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgndmlkZW8nKTtcclxuXHJcblx0aWYodmlkZW8ubGVuZ3RoKSB7XHJcblxyXG5cdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh2aWRlbywgZnVuY3Rpb24gKGVsKSB7XHJcblxyXG5cdFx0XHRtZXRvZCA9PSAncGxheScgPyBlbC5wbGF5KCkgOiBlbC5wYXVzZSgpO1xyXG5cclxuXHRcdH0pO1xyXG5cclxuXHR9XHJcblxyXG59O1xyXG5cclxuKGZ1bmN0aW9uKGJ0bkZ1bGxNZW51KXtcclxuXHJcblx0aWYoIWJ0bkZ1bGxNZW51KSB7XHJcblxyXG5cdFx0cmV0dXJuO1xyXG5cclxuXHR9XHJcblxyXG5cdGJ0bkZ1bGxNZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdENGLnZpZGVvVG9nZ2xlKCdzdG9wJyk7XHJcblxyXG5cdFx0YnRuRnVsbE1lbnUucGFyZW50Tm9kZS5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX25hdi0tc2hvdycpO1xyXG5cclxuXHR9KTtcclxuXHJcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKXtcclxuXHJcblx0XHRpZighZS50YXJnZXQuY2xvc2VzdCgnLmhlYWRlcl9fbmF2JykgfHwgZS50YXJnZXQuY2xvc2VzdCgnLmhlYWRlcl9fc2VhcmNoJykpe1xyXG5cclxuXHRcdFx0Q0YudmlkZW9Ub2dnbGUoJ3BsYXknKTtcclxuXHRcdFx0YnRuRnVsbE1lbnUucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXJfX25hdi0tc2hvdycpO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fSk7XHJcblxyXG59KShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19idG4tZnVsbC1tZW51JykpO1xyXG5cclxuLy8gYmdcclxuKGZ1bmN0aW9uKHNlYXJjaCl7XHJcblxyXG5cdGlmKCFzZWFyY2gpIHtcclxuXHJcblx0XHRyZXR1cm47XHJcblxyXG5cdH1cclxuXHJcblx0dmFyIG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19idG4tZnVsbC1tZW51JykucGFyZW50Tm9kZTtcclxuXHJcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKXtcclxuXHJcblx0XHRpZihtZW51LmNsYXNzTGlzdC5jb250YWlucygnaGVhZGVyX19uYXYtLXNob3cnKSB8fCBzZWFyY2guY2xhc3NMaXN0LmNvbnRhaW5zKCdoZWFkZXJfX3NlYXJjaC0tc2hvdycpKSB7XHJcblxyXG5cdFx0XHRDRi52aWRlb1RvZ2dsZSgnc3RvcCcpO1xyXG5cdFx0XHRDRi5ib2R5LmNsYXNzTGlzdC5hZGQoJ2JvZHktLWJnJyk7XHJcblxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblxyXG5cdFx0XHRDRi52aWRlb1RvZ2dsZSgncGxheScpO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fSk7XHJcblxyXG59KShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19zZWFyY2gnKSk7XHJcblxyXG5cclxuLy8gbWVudSBtb2JpbGVcclxuKGZ1bmN0aW9uKGJ0bil7XHJcblxyXG5cdGlmKCFidG4pIHtcclxuXHJcblx0XHRyZXR1cm47XHJcblxyXG5cdH1cclxuXHJcblx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdGlmKENGLk9wZW5NZW51KSB7XHJcblxyXG5cdFx0XHRDRi5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ21lbnUtc2hvdycpO1xyXG5cclxuXHRcdFx0d2luZG93LnNjcm9sbFRvKDAsQ0Yud2luZG93U2Nyb2xsT2xkKTtcclxuXHJcblx0XHRcdENGLk9wZW5NZW51ID0gZmFsc2U7XHJcblxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblxyXG5cdFx0XHRDRi5PcGVuTWVudSA9IHRydWU7XHJcblxyXG5cdFx0XHQvLyDQt9Cw0L/QuNGB0YvQstCw0LXQvCDQt9C90LDRh9C10L3QuNC1INGB0LrRgNC+0LvQu9CwINGB0YLRgNCw0L3QuNGG0YtcclxuXHRcdFx0Q0Yud2luZG93U2Nyb2xsT2xkID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xyXG5cdFx0XHR3aW5kb3cuc2Nyb2xsVG8oMCwwKTtcclxuXHJcblx0XHRcdENGLmJvZHkuY2xhc3NMaXN0LmFkZCgnbWVudS1zaG93Jyk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxuXHJcbn0pKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2J0bi1tZW51LXRvZ2dsZScpKTsiLCJcclxuKGZ1bmN0aW9uKCl7XHJcblxyXG5cdHZhciBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbCcpLFxyXG5cdFx0Ym94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsX19ib3gnKSxcclxuXHRcdGl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsX19pdGVtJyksXHJcblx0XHR3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndyYXBwZXInKSxcclxuXHRcdHZpZGVvQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLXZpZGVvJyksXHJcblx0XHRhY3RpdmVJdGVtID0gbnVsbDtcclxuXHJcblx0Ly8g0LrQu9C40Log0L/QviDRhNC+0L3RgyDQuNC70Lgg0LrQvdC+0L/QutCw0Lwg0LfQsNC60YDRi9GC0YxcclxuXHRBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG1vZGFsLCBmdW5jdGlvbiAoZWwpIHtcclxuXHJcblx0XHRlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcblxyXG5cdFx0XHRpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsJykgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RhbF9fY2xvc2UnKSl7XHJcblxyXG5cdFx0XHRcdENGLmhpZGVNb2RhbCgpO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH0pO1xyXG5cclxuXHR9KTtcclxuXHJcblx0Q0YuaGlkZU1vZGFsID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0Q0YudmlkZW9Ub2dnbGUoJ3BsYXknKTtcclxuXHJcblx0XHRBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG1vZGFsLCBmdW5jdGlvbiAoZWwpIHtcclxuXHJcblx0XHRcdGVsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbi12aXNpYmxlJyk7XHJcblxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Q0YuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC1zaG93Jyk7XHJcblx0XHR3cmFwcGVyLnN0eWxlLnRvcCA9IDA7XHJcblx0XHR3aW5kb3cuc2Nyb2xsVG8oMCxDRi53aW5kb3dTY3JvbGxPbGQpO1xyXG5cclxuXHRcdGFjdGl2ZUl0ZW0gPSBmYWxzZTtcclxuXHJcblx0XHQvLyBjbGVhciB2aWRlb1xyXG5cdFx0aWYgKHZpZGVvQm94KXtcclxuXHJcblx0XHRcdHZpZGVvQm94LmlubmVySFRNTCA9ICcnO1xyXG5cclxuXHRcdH1cclxuXHJcblx0fTtcclxuXHJcblx0Q0YubW9kYWxTaG93ID0gZnVuY3Rpb24gKHNlbGVjdG9yLHRpdGxlLHRleHQpIHtcclxuXHJcblx0XHRDRi52aWRlb1RvZ2dsZSgnc3RvcCcpO1xyXG5cclxuXHRcdC8vINC10YHQu9C4INC80L7QtNCw0LvRjNC90YvQtSDQvtC60L3QsCDQvdC1INC/0L7QutCw0LfQsNC90YtcclxuICAgICAgICBpZiAoIWFjdGl2ZUl0ZW0pIHtcclxuXHJcblx0XHRcdENGLndpbmRvd1Njcm9sbE9sZCA9IHdpbmRvdy5wYWdlWU9mZnNldDtcclxuXHJcblx0XHRcdHdyYXBwZXIuc3R5bGUudG9wID0gLUNGLndpbmRvd1Njcm9sbE9sZCArICdweCc7XHJcblxyXG5cdFx0fVxyXG5cclxuICAgICAgICBhY3RpdmVJdGVtID0gbnVsbDtcclxuXHJcblx0XHQvLyDQuNGJ0LXQvCDQsNC60YLQuNCy0L3QvtC1INC+0LrQvdC+INC4INC10LPQviDQsdC+0LrRgVxyXG5cdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChpdGVtcywgZnVuY3Rpb24oZWwpe1xyXG5cclxuXHRcdFx0aWYoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RhbF9faXRlbS0tJyArIHNlbGVjdG9yKSkge1xyXG5cclxuXHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4tdmlzaWJsZScpO1xyXG5cclxuXHRcdFx0XHRhY3RpdmVJdGVtID0gZWw7XHJcblxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cclxuXHRcdFx0XHRlbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4tdmlzaWJsZScpO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdH0pO1xyXG5cclxuICAgICAgICBpZiAoIWFjdGl2ZUl0ZW0pIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdNb2RhbCBcIiVzXCIgbm90IGZvdW5kJywgc2VsZWN0b3IpO1xyXG5cdFx0XHRyZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2VsZWN0b3IgPT09ICdvaycpIHtcclxuXHJcblx0XHRcdGlmKCF0aXRsZSkge1xyXG5cclxuXHRcdFx0XHR0aXRsZSA9ICcnO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYoIXRleHQpIHtcclxuXHJcblx0XHRcdFx0dGV4dCA9ICcnO1xyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0YWN0aXZlSXRlbS5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3RpdGxlJykuaW5uZXJIVE1MID0gdGl0bGU7XHJcblx0XHRcdGFjdGl2ZUl0ZW0ucXVlcnlTZWxlY3RvcignLm1vZGFsX190ZXh0JykuaW5uZXJIVE1MID0gdGV4dDtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0Ly8g0YHQutGA0YvQstCw0LXQvCDQstGB0LUg0LHQvtC60YHRi1xyXG5cdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChtb2RhbCwgZnVuY3Rpb24gKGVsKSB7XHJcblxyXG5cdFx0XHRlbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4tdmlzaWJsZScpO1xyXG5cclxuXHRcdH0pO1xyXG5cclxuXHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYm94LCBmdW5jdGlvbiAoZWwpIHtcclxuXHJcblx0XHRcdGVsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbi12aXNpYmxlJyk7XHJcblxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8g0L/QvtC60LDQt9GL0LLRi9C10Lwg0LDQutGC0LjQstC90YvQuSDQsdC+0LrRgVxyXG5cdFx0YWN0aXZlSXRlbS5jbG9zZXN0KCcubW9kYWwnKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4tdmlzaWJsZScpO1xyXG5cdFx0YWN0aXZlSXRlbS5jbG9zZXN0KCcubW9kYWxfX2JveCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbi12aXNpYmxlJyk7XHJcblxyXG5cdFx0Q0YuYm9keS5jbGFzc0xpc3QuYWRkKCdtb2RhbC1zaG93Jyk7XHJcblx0XHR3aW5kb3cuc2Nyb2xsVG8oMCwwKTtcclxuXHJcblx0XHQvLyBjbG9zZSBtZW51XHJcblx0XHRpZihDRi5PcGVuTWVudSl7XHJcblxyXG5cdFx0XHRDRi5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ21lbnUtc2hvdycpO1xyXG5cdFx0XHRDRi5PcGVuTWVudSA9IGZhbHNlO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRhY3RpdmVJdGVtLmZvY3VzKCk7XHJcblxyXG5cdFx0Ly8g0LLRi9C30YvQstGL0LXQvCDRgdC+0LHRi9GC0LjQtSDQvdCwINCw0LrRgtC40LLQvdC+0Lwg0L7QutC90LVcclxuXHRcdGlmICh0eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50ID09PSAnZnVuY3Rpb24nKSB7XHJcblxyXG5cdFx0XHRhY3RpdmVJdGVtLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdtb2RhbFNob3cnKSk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHR9O1xyXG5cclxuXHQvLyDRgdC70YPRiNCw0LXQvCDQuNGB0YLQvtGH0L3QuNC6INC60LvQuNC60LBcclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcblxyXG5cdFx0dmFyIHRhcmdldCA9IGUudGFyZ2V0O1xyXG5cclxuXHRcdHdoaWxlICh0YXJnZXQgIT09IHRoaXMpIHtcclxuXHJcblx0XHRcdGlmICh0YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLW1vZGFsJykpIHtcclxuXHJcblx0XHRcdFx0Q0YubW9kYWxTaG93KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kYWwnKSk7XHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTtcclxuXHJcblx0XHR9XHJcblxyXG5cdH0pO1xyXG5cclxufSkoKTsiLCJcbihmdW5jdGlvbihlbGVtcyl7XG5cblx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbGVtcywgZnVuY3Rpb24gKGVsKSB7XG5cblx0XHR2YXIgZm9ybSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5vZmZpY2Utc2VsZWN0X19mb3JtJyksXG5cdFx0XHRpbnB1dCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5vZmZpY2Utc2VsZWN0X19pbnB1dCcpLFxuXHRcdFx0cmVzZXQgPSBlbC5xdWVyeVNlbGVjdG9yKCcub2ZmaWNlLXNlbGVjdF9fcmVzZXQnKTtcblxuXHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRyZXNldC5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlJywgaW5wdXQudmFsdWUubGVuZ3RoIDwgNCk7XG5cblx0XHR9KTtcblxuXHRcdGZvcm0uYWRkRXZlbnRMaXN0ZW5lcigncmVzZXQnLCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHJlc2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcblx0XHRcdGlucHV0LnZhbHVlID0gJyc7XG5cblx0XHR9KTtcblxuXHR9KTtcblxuXHQvLyDRgdC70YPRiNCw0LXQvCDQuNGB0YLQvtGH0L3QuNC6INC60LvQuNC60LBcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXG5cdFx0dmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuXG5cdFx0d2hpbGUgKHRhcmdldCAhPT0gdGhpcykge1xuXG5cdFx0XHRpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnb2ZmaWNlLXNlbGVjdF9fYnRuLXRvZ2dsZS1yYXNwJykpIHtcblxuXHRcdFx0XHR2YXIgdGFibGVCb3ggPSB0YXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcub2ZmaWNlLXNlbGVjdF9fcmFzcCcpLFxuXHRcdFx0XHRcdGhlaWdodCA9IHRhYmxlQm94LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJykuY2xpZW50SGVpZ2h0O1xuXG5cdFx0XHRcdGlmKHRhYmxlQm94LmNsaWVudEhlaWdodCA+IDApe1xuXG5cdFx0XHRcdFx0aGVpZ2h0ID0gMDtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGFibGVCb3guc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcblxuXHRcdFx0fVxuXG5cdFx0XHR0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTtcblxuXHRcdH1cblxuXHR9KTtcblxuXG59KShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub2ZmaWNlLXNlbGVjdCcpKTsiLCJcbihmdW5jdGlvbihtb2RhbFBvbGwpe1xuXG5cdGlmKG1vZGFsUG9sbC5sZW5ndGgpIHtcblxuXHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwobW9kYWxQb2xsLCBmdW5jdGlvbiAoZWwpIHtcblxuXHRcdFx0dmFyIHJhZGlvID0gZWwucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsLXBvbGxfX3JhZGlvIGlucHV0JyksXG5cdFx0XHRcdGlucHV0VGV4dCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1wb2xsX19pbnB1dC1jdXN0b20nKSxcblx0XHRcdFx0YnRuID0gZWwucXVlcnlTZWxlY3RvcignLm1vZGFsX19idG4nKTtcblxuXHRcdFx0ZnVuY3Rpb24gaW5wdXRUZXh0RXZlbnQoKXtcblxuXHRcdFx0XHRidG4uZGlzYWJsZWQgPSAhaW5wdXRUZXh0LnZhbHVlO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlucHV0VGV4dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRpbnB1dFRleHRFdmVudCgpO1xuXG5cdFx0XHR9KTtcblxuXHRcdFx0aW5wdXRUZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0aW5wdXRUZXh0RXZlbnQoKTtcblxuXHRcdFx0fSk7XG5cblx0XHRcdGlucHV0VGV4dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0aW5wdXRUZXh0RXZlbnQoKTtcblxuXHRcdFx0fSk7XG5cblx0XHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwocmFkaW8sIGZ1bmN0aW9uIChlbGVtKSB7XG5cblx0XHRcdFx0ZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRidG4uZGlzYWJsZWQgPSBmYWxzZTtcblxuXHRcdFx0XHRcdGlmICh0aGlzLnZhbHVlID09PSAnY3VzdG9tJykge1xuXG5cdFx0XHRcdFx0XHRpbnB1dFRleHQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuXHRcdFx0XHRcdFx0aW5wdXRUZXh0LmRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRpbnB1dFRleHQuZm9jdXMoKTtcblxuXHRcdFx0XHRcdFx0aW5wdXRUZXh0RXZlbnQoKTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdGlucHV0VGV4dC5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XG5cdFx0XHRcdFx0XHRpbnB1dFRleHQuZGlzYWJsZWQgPSB0cnVlO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9KTtcblxuXG5cdFx0fSk7XG5cblx0fVxuXG59KShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwtcG9sbCcpKTsiLCIvKiog0K3RgtC+0YIg0LrQvtC0INCyINC/0YDQvtC00LDQutGI0LXQvdC1INCx0L7Qu9GM0YjQtSDQvdC1INC40YHQv9C+0LvRjNC30YPQtdGC0YHRj1xyXG5cclxuKGZ1bmN0aW9uKGVsZW1zKXtcclxuXHJcblx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbGVtcywgZnVuY3Rpb24odGltZXIpe1xyXG5cclxuXHRcdHZhciBjbGVhckludGVydmFsSUQgPSBudWxsLFxyXG5cdFx0XHRmb3JtUmVwZWF0ID0gdGltZXIucXVlcnlTZWxlY3RvcignLm1vZGFsLXRpbWVyX19mb3JtJyksXHJcblx0XHRcdGJ0blJlcGVhdCA9IHRpbWVyLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC10aW1lcl9fc3VibWl0JyksXHJcblx0XHRcdHRpbWVyVGV4dCA9IHRpbWVyLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC10aW1lcl9fdGV4dCcpLFxyXG5cdFx0XHR0aW1lclZhbHVlID0gdGltZXIucXVlcnlTZWxlY3RvcignLm1vZGFsLXRpbWVyX192YWx1ZScpLFxyXG5cdFx0XHR0aW1lclN0YXJ0ID0gcGFyc2VJbnQodGltZXJWYWx1ZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGltZScpKSxcclxuXHRcdFx0c3VmID0gdGltZXJWYWx1ZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3VmJykuc3BsaXQoJywnKTtcclxuXHJcblx0XHRmdW5jdGlvbiBzZXR1cCgpe1xyXG5cclxuXHRcdFx0dmFyIGNvdW50ID0gdGltZXJTdGFydDtcclxuXHJcblx0XHRcdHRpbWVyVmFsdWUudGV4dENvbnRlbnQgPSBjb3VudCArICcgJyArIENGLmRlY2xlbnNpb24oY291bnQsc3VmKTtcclxuXHRcdFx0dGltZXJUZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcclxuXHRcdFx0YnRuUmVwZWF0LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcclxuXHJcblx0XHRcdGNsZWFySW50ZXJ2YWwoY2xlYXJJbnRlcnZhbElEKTtcclxuXHJcblx0XHRcdGNsZWFySW50ZXJ2YWxJRCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XHJcblxyXG5cdFx0XHRcdGlmKGNvdW50IDwgMSkge1xyXG5cclxuXHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwoY2xlYXJJbnRlcnZhbElEKTtcclxuXHJcblx0XHRcdFx0XHR0aW1lclRleHQuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xyXG5cdFx0XHRcdFx0YnRuUmVwZWF0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjb3VudC0tO1xyXG5cdFx0XHRcdHRpbWVyVmFsdWUudGV4dENvbnRlbnQgPSBjb3VudCArICcgJyArIENGLmRlY2xlbnNpb24oY291bnQsc3VmKTtcclxuXHJcblx0XHRcdH0sIDEwMDApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHR0aW1lci5hZGRFdmVudExpc3RlbmVyKCdtb2RhbFNob3cnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRzZXR1cCgpO1xyXG5cclxuXHRcdH0pO1xyXG5cclxuXHRcdGJ0blJlcGVhdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcclxuXHRcdFx0XHRmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtUmVwZWF0KTtcclxuXHJcblx0XHRcdHhoci5vcGVuKFwiR0VUXCIsIGZvcm1SZXBlYXQuZ2V0QXR0cmlidXRlKCdhY3Rpb24nKSk7XHJcblxyXG5cdFx0XHRzZXR1cCgpO1xyXG5cclxuXHRcdFx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcclxuXHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygn0LfQsNC/0YDQvtGBINC90LAg0L3QvtCy0YvQuSDQutC+0LQg0YPRgdC/0LXRiNC90L4g0L7RgtC/0YDQsNCy0LvQtdC9LicpO1xyXG5cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICh4aHIuc3RhdHVzICE9PSAyMDApIHtcclxuXHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygn0L7RiNC40LHQutCwICcgKyB4aHIuc3RhdHVzKTtcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0eGhyLnNlbmQoZm9ybURhdGEpO1xyXG5cclxuXHRcdH0pO1xyXG5cclxuXHR9KTtcclxuXHJcbn0pKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbC10aW1lcicpKTsqLyIsIihmdW5jdGlvbihjb250ZW50KXtcclxuXHJcblx0aWYoIWNvbnRlbnQpIHtcclxuXHJcblx0XHRyZXR1cm47XHJcblxyXG5cdH1cclxuXHJcblx0dmFyIHZpZGVvcyA9IGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEteW91dHViZV0nKTtcclxuXHJcblx0aWYodmlkZW9zLmxlbmd0aCkge1xyXG5cclxuXHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodmlkZW9zLCBmdW5jdGlvbiAodmlkZW8pIHtcclxuXHJcblx0XHRcdHZhciBpZCA9IHZpZGVvLmdldEF0dHJpYnV0ZSgnZGF0YS15b3V0dWJlJyk7XHJcblxyXG5cdFx0XHR2aWRlby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcblxyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRcdFx0dmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xyXG5cclxuXHRcdFx0XHRpZnJhbWUuc2V0QXR0cmlidXRlKCdhbGxvd2Z1bGxzY3JlZW4nLCAnJyk7XHJcblx0XHRcdFx0aWZyYW1lLnNldEF0dHJpYnV0ZSgnYWxsb3cnLCAnYXV0b3BsYXknKTtcclxuXHRcdFx0XHRpZnJhbWUuc2V0QXR0cmlidXRlKCdzcmMnLCAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvJyArIGlkICsgJz9yZWw9MCZzaG93aW5mbz0wJmF1dG9wbGF5PTEnKTtcclxuXHJcblx0XHRcdFx0dmlkZW8uYXBwZW5kQ2hpbGQoaWZyYW1lKTtcclxuXHRcdFx0XHR2aWRlby5jbGFzc0xpc3QuYWRkKCd5b3V0dWJlLWlmcmFtZScpO1xyXG5cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0fSk7XHJcblxyXG5cdH1cclxuXHJcbn0pKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlX19jb250ZW50JykpOyJdfQ==
